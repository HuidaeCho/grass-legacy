VERSION_NUMBER=4.2
VERSION_DATE=Fall, 1997
VERSION_UPDATE_PKG=
VERSION_FILE=/stokes3/macgyver/grass/src42/src/CMD/VERSION
SRC=/stokes3/macgyver/grass/src42/src
OBJARCH=OBJ
LIBARCH=LIB

CC                  = cc
ARCH                =

GISBASE             = /stokes3/macgyver/grass/bin42
UNIX_BIN            = /export/home/macgyver/bin2

DEFAULT_DATABASE    = /stokes3/macgyver/grassdata
DEFAULT_LOCATION    = PERMANENT

COMPILE_FLAGS       = -O
LDFLAGS             = -s

XCFLAGS             = -D_NO_PROTO
XLDFLAGS            =
XINCPATH            = -I/usr/openwin/include
XMINCPATH           =
XLIBPATH            = -L/usr/openwin/lib
XTLIBPATH           = -L/usr/lib
XMLIBPATH           = -L/usr/lib
XLIB                = -lX11
XTLIB               = -lXt
XMLIB               = -lXm
XEXTRALIBS          =

TERMLIB             = -ltermlib
CURSES              = -lcurses $(TERMLIB)
MATHLIB             = -lm

#                   LIBRULE = ar ruv $@ $?
#                   LIBRULE = ar ruv $@ $?; ranlib $@
#                   LIBRULE = ar ruv $@ $?; ar ts $@
#                   LIBRULE = ar rc $@ `lorder $(OBJ) | tsort`
LIBRULE             = ar ruv $@ $?

USE_TERMIO          =
USE_MTIO            = -DUSE_MTIO
USE_FTIME           =
DIGITFLAGS          =
VECTLIBFLAGS        =
GETHOSTNAME         = -DGETHOSTNAME_UNAME
GMAKE = /export/home/macgyver/bin2/gmake4.2
# to force make to use /bin/sh
SHELL           = /bin/sh
#########################################################################
# these define the various directories which contain GRASS programs
# or files used by GRASS programs
BIN             = $(GISBASE)/bin
ETC             = $(GISBASE)/etc
GARDEN_BIN      = $(GISBASE)/garden/bin
GARDEN_ETC      = $(GISBASE)/garden/etc
BIN_MAIN_INTER  = $(ETC)/bin/main/inter
BIN_MAIN_CMD    = $(ETC)/bin/main/cmd
BIN_ALPHA_INTER = $(ETC)/bin/alpha/inter
BIN_ALPHA_CMD   = $(ETC)/bin/alpha/cmd
BIN_CONTRIB_INTER = $(ETC)/bin/contrib/inter
BIN_CONTRIB_CMD   = $(ETC)/bin/contrib/cmd
TXT             = $(GISBASE)/txt
MAN1            = $(GISBASE)/man/1
MAN2            = $(GISBASE)/man/2
MAN3            = $(GISBASE)/man/3
MAN4            = $(GISBASE)/man/4
MAN5            = $(GISBASE)/man/5
MAN6            = $(GISBASE)/man/6
HELP            = $(GISBASE)/man/help

# other
CFLAGS      =  $(COMPILE_FLAGS) $(EXTRA_CFLAGS) -I$(INCLUDE_DIR) $(USE_TERMIO)
AR          = $(GMAKE) -makeparentdir $@; $(LIBRULE)
#MANROFF     = tbl -TX $(SRC)/man.help/man.version $(SRC)/man.help/man.header $? | nroff -Tlp | col -b > $@
MANROFF     = # 
MAKEALL     = $(GMAKE) -all

# various source directories and libraries
SRC_X       = $(SRC)/xgrass
LIBDIR      = $(SRC)/libes
X_LIBDIR     = $(SRC_X)/libes
INCLUDE_DIR = $(SRC)/include
DIG_LIBDIR  = $(SRC)/mapdev/libes
DIG_INCLUDE  = $(SRC)/mapdev/lib
VECT_INCLUDE = -I$(SRC)/mapdev/Vlib -I$(SRC)/mapdev/diglib

VASKLIB     = $(LIBDIR)/$(LIBARCH)/libvask.a
VASK        = $(VASKLIB) $(CURSES)

GISLIB      = $(LIBDIR)/$(LIBARCH)/libgis.a
ICONLIB     = $(LIBDIR)/$(LIBARCH)/libicon.a
LOCKLIB     = $(LIBDIR)/$(LIBARCH)/liblock.a
IMAGERYLIB  = $(LIBDIR)/$(LIBARCH)/libI.a
ROWIOLIB    = $(LIBDIR)/$(LIBARCH)/librowio.a
COORCNVLIB  = $(LIBDIR)/$(LIBARCH)/libcoorcnv.a
SEGMENTLIB  = $(LIBDIR)/$(LIBARCH)/libsegment.a
GPROJLIB    = $(LIBDIR)/$(LIBARCH)/libproj.a
BTREELIB    = $(LIBDIR)/$(LIBARCH)/libbtree.a
IBTREELIB   = $(LIBDIR)/$(LIBARCH)/libibtree.a
DLGLIB      = $(LIBDIR)/$(LIBARCH)/libdlg.a
RASTERLIB   = $(LIBDIR)/$(LIBARCH)/libraster.a
DISPLAYLIB  = $(LIBDIR)/$(LIBARCH)/libdisplay.a
D_LIB       = $(LIBDIR)/$(LIBARCH)/libD.a
DRIVERLIB   = $(SRC)/display/devices/lib/$(LIBARCH)/driverlib.a
LINKMLIB    = $(LIBDIR)/$(LIBARCH)/liblinkm.a
BITMAPLIB    = $(LIBDIR)/$(LIBARCH)/libbitmap.a
XGILIB	    = $(X_LIBDIR)/$(LIBARCH)/libXgi.a
XGDLIB	    = $(X_LIBDIR)/$(LIBARCH)/libXgd.a
XPMLIB	    = $(X_LIBDIR)/$(LIBARCH)/libXpm.a


DIGLIB      = $(LIBDIR)/$(LIBARCH)/libdig.a
DIG2LIB     = $(LIBDIR)/$(LIBARCH)/libdig2.a
VECTLIB_REAL= $(LIBDIR)/$(LIBARCH)/libvect.a
VECTLIB     = $(VECTLIB_REAL) $(DIG2LIB)
DIG_ATTLIB  = $(LIBDIR)/$(LIBARCH)/libdig_atts.a

XDISPLAYLIB = $(LIBDIR)/$(LIBARCH)/libXdisplay.a
#########################################################################
###########################################################
#    $(OBJARCH)/set_head.o 

OBJ = \
    $(OBJARCH)/allocation.o  \
    $(OBJARCH)/attribute.o \
    $(OBJARCH)/area.o \
    $(OBJARCH)/bound_box.o  \
    $(OBJARCH)/calc_angl.o  \
    $(OBJARCH)/check_node.o  \
    $(OBJARCH)/chk_inside.o \
    $(OBJARCH)/clock.o \
    $(OBJARCH)/cont_lines.o \
    $(OBJARCH)/debugf.o \
    $(OBJARCH)/file_checks.o \
    $(OBJARCH)/find_area.o \
    $(OBJARCH)/format.o \
    $(OBJARCH)/isle.o \
    $(OBJARCH)/linecros.o \
    $(OBJARCH)/line_dist.o \
    $(OBJARCH)/load_plus.o \
    $(OBJARCH)/map_to_head.o  \
    $(OBJARCH)/memory_io.o \
    $(OBJARCH)/node_op.o  \
    $(OBJARCH)/old2new.o \
    $(OBJARCH)/point_t_line.o \
    $(OBJARCH)/point_t_area.o \
    $(OBJARCH)/prune.o  \
    $(OBJARCH)/rw_ascii.o  \
    $(OBJARCH)/struct_alloc.o  \
    $(OBJARCH)/struct_copy.o \
    $(OBJARCH)/unit_conv.o \
    $(OBJARCH)/write_file.o \
    \
    $(OBJARCH)/portable.o \
    $(OBJARCH)/portable2.o \
    $(OBJARCH)/x_struct_io.o 


CFILES = \
    allocation.c  \
    attribute.c \
    area.c \
    bound_box.c  \
    calc_angl.c  \
    check_node.c  \
    chk_inside.c \
    clock.c \
    cont_lines.c \
    debugf.c \
    file_checks.c \
    find_area.c \
    linecros.c \
    line_dist.c \
    load_plus.c \
    map_to_head.c  \
    memory_io.c \
    node_op.c  \
    old2new.c \
    point_t_line.c \
    point_t_area.c \
    prune.c  \
    rw_ascii.c  \
    struct_alloc.c  \
    struct_copy.c \
    unit_conv.c \
    write_file.c \
    format.c \
    isle.c \
    \
    portable.c \
    portable2.c \
    x_rw_binary.c \
    x_point_io.c \
    x_struct_io.c 


$(DIG2LIB): $(OBJ)
	$(AR)


read_head: $(OBJARCH)/read_head.o
	$(CC) -o $@ $(OBJARCH)/read_head.o $(DIGLIB) $(GISLIB)
	-rm read_head.c

read_head.c: read_head.C
	cp read_head.C read_head.c


iprint:
	pr -l60 *.h *.c | expand -4 | ipr


$(OBJARCH)/check_node.o:	dig_nodes.h 
$(OBJARCH)/curses.o:	menu.h
$(OBJARCH)/digitize.o:	
$(OBJARCH)/edit.o:		
first_plot.o:
$(OBJARCH)/interact.o:	
$(OBJARCH)/mark.o:		
$(OBJARCH)/move_point.o:	
$(OBJARCH)/node_op.o:	dig_nodes.h 
$(OBJARCH)/remove.o:	
$(OBJARCH)/set_thresh.o:	
$(OBJARCH)/snap.o:	
$(OBJARCH)/snap.o:	
$(OBJARCH)/map_ask.o: map.h
$(OBJARCH)/map_coor.o: map.h
$(OBJARCH)/map_init.o: map.h
$(OBJARCH)/map_resid.o: map.h
$(OBJARCH)/map_scale.o:	
$(OBJARCH)/menus.o:  menus.i

$(OBJARCH)/allocation.o: allocation.c
	rm -f $@
	$(CC) $(CFLAGS) -c allocation.c
	mv allocation.o $@
$(OBJARCH)/area.o: area.c
	rm -f $@
	$(CC) $(CFLAGS) -c area.c
	mv area.o $@
$(OBJARCH)/attribute.o: attribute.c
	rm -f $@
	$(CC) $(CFLAGS) -c attribute.c
	mv attribute.o $@
$(OBJARCH)/bound_box.o: bound_box.c
	rm -f $@
	$(CC) $(CFLAGS) -c bound_box.c
	mv bound_box.o $@
$(OBJARCH)/calc_angl.o: calc_angl.c
	rm -f $@
	$(CC) $(CFLAGS) -c calc_angl.c
	mv calc_angl.o $@
$(OBJARCH)/check_node.o: check_node.c
	rm -f $@
	$(CC) $(CFLAGS) -c check_node.c
	mv check_node.o $@
$(OBJARCH)/chk_inside.o: chk_inside.c
	rm -f $@
	$(CC) $(CFLAGS) -c chk_inside.c
	mv chk_inside.o $@
$(OBJARCH)/clock.o: clock.c
	rm -f $@
	$(CC) $(CFLAGS) -c clock.c
	mv clock.o $@
$(OBJARCH)/cont_lines.o: cont_lines.c
	rm -f $@
	$(CC) $(CFLAGS) -c cont_lines.c
	mv cont_lines.o $@
$(OBJARCH)/debugf.o: debugf.c
	rm -f $@
	$(CC) $(CFLAGS) -c debugf.c
	mv debugf.o $@
$(OBJARCH)/file_checks.o: file_checks.c
	rm -f $@
	$(CC) $(CFLAGS) -c file_checks.c
	mv file_checks.o $@
$(OBJARCH)/find_area.o: find_area.c
	rm -f $@
	$(CC) $(CFLAGS) -c find_area.c
	mv find_area.o $@
$(OBJARCH)/format.o: format.c
	rm -f $@
	$(CC) $(CFLAGS) -c format.c
	mv format.o $@
$(OBJARCH)/isle.o: isle.c
	rm -f $@
	$(CC) $(CFLAGS) -c isle.c
	mv isle.o $@
$(OBJARCH)/line_dist.o: line_dist.c
	rm -f $@
	$(CC) $(CFLAGS) -c line_dist.c
	mv line_dist.o $@
$(OBJARCH)/linecros.o: linecros.c
	rm -f $@
	$(CC) $(CFLAGS) -c linecros.c
	mv linecros.o $@
$(OBJARCH)/load_plus.o: load_plus.c
	rm -f $@
	$(CC) $(CFLAGS) -c load_plus.c
	mv load_plus.o $@
$(OBJARCH)/map_to_head.o: map_to_head.c
	rm -f $@
	$(CC) $(CFLAGS) -c map_to_head.c
	mv map_to_head.o $@
$(OBJARCH)/memory_io.o: memory_io.c
	rm -f $@
	$(CC) $(CFLAGS) -c memory_io.c
	mv memory_io.o $@
$(OBJARCH)/node_op.o: node_op.c
	rm -f $@
	$(CC) $(CFLAGS) -c node_op.c
	mv node_op.o $@
$(OBJARCH)/old2new.o: old2new.c
	rm -f $@
	$(CC) $(CFLAGS) -c old2new.c
	mv old2new.o $@
$(OBJARCH)/point_t_area.o: point_t_area.c
	rm -f $@
	$(CC) $(CFLAGS) -c point_t_area.c
	mv point_t_area.o $@
$(OBJARCH)/point_t_line.o: point_t_line.c
	rm -f $@
	$(CC) $(CFLAGS) -c point_t_line.c
	mv point_t_line.o $@
$(OBJARCH)/portable.o: portable.c
	rm -f $@
	$(CC) $(CFLAGS) -c portable.c
	mv portable.o $@
$(OBJARCH)/portable2.o: portable2.c
	rm -f $@
	$(CC) $(CFLAGS) -c portable2.c
	mv portable2.o $@
$(OBJARCH)/prune.o: prune.c
	rm -f $@
	$(CC) $(CFLAGS) -c prune.c
	mv prune.o $@
$(OBJARCH)/read_head.o: read_head.c
	rm -f $@
	$(CC) $(CFLAGS) -c read_head.c
	mv read_head.o $@
$(OBJARCH)/rw_ascii.o: rw_ascii.c
	rm -f $@
	$(CC) $(CFLAGS) -c rw_ascii.c
	mv rw_ascii.o $@
$(OBJARCH)/set_head.o: set_head.c
	rm -f $@
	$(CC) $(CFLAGS) -c set_head.c
	mv set_head.o $@
$(OBJARCH)/struct_alloc.o: struct_alloc.c
	rm -f $@
	$(CC) $(CFLAGS) -c struct_alloc.c
	mv struct_alloc.o $@
$(OBJARCH)/struct_copy.o: struct_copy.c
	rm -f $@
	$(CC) $(CFLAGS) -c struct_copy.c
	mv struct_copy.o $@
$(OBJARCH)/unit_conv.o: unit_conv.c
	rm -f $@
	$(CC) $(CFLAGS) -c unit_conv.c
	mv unit_conv.o $@
$(OBJARCH)/write_file.o: write_file.c
	rm -f $@
	$(CC) $(CFLAGS) -c write_file.c
	mv write_file.o $@
$(OBJARCH)/x_struct_io.o: x_struct_io.c
	rm -f $@
	$(CC) $(CFLAGS) -c x_struct_io.c
	mv x_struct_io.o $@
#########################################################################
# the tags file created by "make ctags" is great for
# editing to look for function definitions
# vi -t <function name>

ctags:
	ctags *.[ch]
	sed 's/\?/\//g' tags > tags.tmp
	mv tags.tmp tags
tags: ctags ; #
