# SQLBASE is where sqlbase C/API header files and libraries are installed
# SQLBASE=/SQLBASE

# these are DBMI definitions
# STUBLIB = ../libstubs.a
STUBLIB=

DBMIDIR = $(GISBASE)/driver/db

LIBES = $(DBMILIB) $(STUBLIB) $(SQLBASE)/sqlroutr.a
DEPLIBS= $(DEPDBMILIB) $(STUBLIB) $(SQLBASE)/sqlroutr.a
EXTRA_CFLAGS = -I$(SQLBASE) -I$(INCLUDE_DIR)

OBJ 	=  \
	bind.o \
	closecur.o \
	closedb.o \
	column.o \
	compilecur.o \
	createdb.o \
	current_dt.o \
	dbname.o \
	defaults.o \
	delete.o \
	deletedb.o \
	describe.o \
	die.o \
	error.o \
	execute.o \
	fetch.o \
	finddb.o \
	finish.o \
	index.o \
	init.o \
	insert.o \
	isnull.o \
	listdb.o \
	listidx.o \
	listtab.o \
	mycursor.o \
	opendb.o \
	passwd.o \
	privs.o \
	quotes.o \
	remarks.o \
	select.o \
	server.o \
	sqlbase.o \
	table.o \
	tbname.o \
	update.o \
	view.o\
	whoami.o

DRIVER = main.o $(OBJ)
TRY = try.o $(OBJ)

$(DBMIDIR)/sqlbase: $(DBMIDIR) $(DRIVER) $(DEPLIBS)
	$(CC) $(LDFLAGS) -o $@ $(DRIVER) $(LIBES) $(XDRLIB)

try: $(TRY) $(DEPLIBS)
	$(CC) $(LDFLAGS) -o $@ $(TRY) $(LIBES) $(XDRLIB)

$(DBMIDIR):
	-mkdir -p $(DBMIDIR)

$(DRIVER) $(TRY):  $(INCLUDE_DIR)/dbmi.h globals.h proto.h
$(DEPLIBS): #


proto:
	make.proto *.c > proto.h
