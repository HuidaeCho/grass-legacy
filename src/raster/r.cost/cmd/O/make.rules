VERSION_NUMBER=4.2
VERSION_DATE=Spr-Sum 1993
VERSION_UPDATE_PKG=  
VERSION_FILE=/apps/grass/4.2/src/src/CMD/VERSION
SRC=/apps/grass/4.2/src/src
OBJARCH=OBJ.solaris5.5
LIBARCH=LIB.solaris5.5

CC                  = gcc
ARCH                = solaris5.5

GISBASE             = /apps/grass/4.2/bin/solaris5.5
UNIX_BIN            = /apps/grass/4.2/bin

DEFAULT_DATABASE    = /data/esker3
DEFAULT_LOCATION    = illinois

COMPILE_FLAGS       = -O
LDFLAGS             = -s

XCFLAGS             = -D_NO_PROTO
XLDFLAGS            =
XINCPATH            =
XMINCPATH           =
XLIBPATH            = -L/usr/lib
XTLIBPATH           = -L/usr/lib
XMLIBPATH           = -L/usr/lib
XLIB                = -lX11
XTLIB               = -lXt
XMLIB               = -lXm
XDRLIB              = -lnsl
XEXTRALIBS          =

TERMLIB             =
CURSES              = -lcurses $(TERMLIB)
MATHLIB             = -lm

#                   LIBRULE = ar ruv $@ $?
#                   LIBRULE = ar ruv $@ $?; ranlib $@
#                   LIBRULE = ar ruv $@ $?; ar ts $@
#                   LIBRULE = ar rc $@ `lorder $(OBJ) | tsort`
LIBRULE             = ar rc $@ `lorder $(OBJ) | tsort`

USE_TERMIO          = -DUSE_TERMIO
USE_MTIO            = -DUSE_MTIO
USE_FTIME           = -DUSE_FTIME
DIGITFLAGS          = -DUSE_SETREUID -DUSE_SETPRIORITY
VECTLIBFLAGS        =
GETHOSTNAME         = -DGETHOSTNAME_OK
GMAKE = /apps/grass/4.2/bin/gmake4.2
# to force make to use /bin/sh
SHELL           = /bin/sh
#########################################################################
# these define the various directories which contain GRASS programs
# or files used by GRASS programs
BIN             = $(GISBASE)/bin
ETC             = $(GISBASE)/etc
GARDEN_BIN      = $(GISBASE)/garden/bin
GARDEN_ETC      = $(GISBASE)/garden/etc
BIN_MAIN_INTER  = $(ETC)/bin/main/inter
BIN_MAIN_CMD    = $(ETC)/bin/main/cmd
BIN_ALPHA_INTER = $(ETC)/bin/main/inter
BIN_ALPHA_CMD   = $(ETC)/bin/main/cmd
BIN_CONTRIB_INTER = $(ETC)/bin/contrib/inter
BIN_CONTRIB_CMD   = $(ETC)/bin/contrib/cmd
TXT             = $(GISBASE)/txt
MAN1            = $(GISBASE)/man/1
MAN2            = $(GISBASE)/man/2
MAN3            = $(GISBASE)/man/3
MAN4            = $(GISBASE)/man/4
MAN5            = $(GISBASE)/man/5
MAN6            = $(GISBASE)/man/6
HELP            = $(GISBASE)/man/help

# other
CFLAGS      =  $(COMPILE_FLAGS) $(EXTRA_CFLAGS) -I$(INCLUDE_DIR) $(USE_TERMIO)
AR          = $(GMAKE) -makeparentdir $@; $(LIBRULE)
#MANROFF     = tbl -TX $(SRC)/man.help/man.version $(SRC)/man.help/man.header $? | nroff -Tlp | col -b > $@
MANROFF     = # 
MAKEALL     = $(GMAKE) -all

# various source directories and libraries
SRC_X       = $(SRC)/xgrass
LIBDIR      = $(SRC)/libes
X_LIBDIR     = $(SRC_X)/libes
INCLUDE_DIR = $(SRC)/include
DIG_LIBDIR  = $(SRC)/mapdev/libes
DIG_INCLUDE  = $(SRC)/mapdev/lib
VECT_INCLUDE = -I$(SRC)/mapdev/Vlib -I$(SRC)/mapdev/diglib

VASKLIB     = $(LIBDIR)/$(LIBARCH)/libvask.a
VASK        = $(VASKLIB) $(CURSES)

GISLIB      = $(LIBDIR)/$(LIBARCH)/libgis.a
G3DLIB      = $(LIBDIR)/$(LIBARCH)/libg3d.a
ICONLIB     = $(LIBDIR)/$(LIBARCH)/libicon.a
LOCKLIB     = $(LIBDIR)/$(LIBARCH)/liblock.a
IMAGERYLIB  = $(LIBDIR)/$(LIBARCH)/libI.a
ROWIOLIB    = $(LIBDIR)/$(LIBARCH)/librowio.a
COORCNVLIB  = $(LIBDIR)/$(LIBARCH)/libcoorcnv.a
SEGMENTLIB  = $(LIBDIR)/$(LIBARCH)/libsegment.a
GPROJLIB    = $(LIBDIR)/$(LIBARCH)/libproj.a
BTREELIB    = $(LIBDIR)/$(LIBARCH)/libbtree.a
IBTREELIB   = $(LIBDIR)/$(LIBARCH)/libibtree.a
DLGLIB      = $(LIBDIR)/$(LIBARCH)/libdlg.a
RASTERLIB   = $(LIBDIR)/$(LIBARCH)/libraster.a
DISPLAYLIB  = $(LIBDIR)/$(LIBARCH)/libdisplay.a
D_LIB       = $(LIBDIR)/$(LIBARCH)/libD.a
DATETIMELIB = $(LIBDIR)/$(LIBARCH)/libdatetime.a
DRIVERLIB   = $(SRC)/display/devices/lib/$(LIBARCH)/driverlib.a
LINKMLIB    = $(LIBDIR)/$(LIBARCH)/liblinkm.a
BITMAPLIB    = $(LIBDIR)/$(LIBARCH)/libbitmap.a
XGILIB	    = $(X_LIBDIR)/$(LIBARCH)/libXgi.a
XGDLIB	    = $(X_LIBDIR)/$(LIBARCH)/libXgd.a
XPMLIB	    = $(X_LIBDIR)/$(LIBARCH)/libXpm.a


DIGLIB      = $(LIBDIR)/$(LIBARCH)/libdig.a
DIG2LIB     = $(LIBDIR)/$(LIBARCH)/libdig2.a
VECTLIB_REAL= $(LIBDIR)/$(LIBARCH)/libvect.a
VECTLIB     = $(VECTLIB_REAL) $(DIG2LIB)
DIG_ATTLIB  = $(LIBDIR)/$(LIBARCH)/libdig_atts.a

# triangulation libraries
SOSLIB      = $(LIBDIR)/$(LIBARCH)/libsos.a
LIALIB      = $(LIBDIR)/$(LIBARCH)/liblia.a
OPTRILIB    = $(LIBDIR)/$(LIBARCH)/liboptri.a
BASICLIB    = $(LIBDIR)/$(LIBARCH)/libbasic.a
GEOMLIB     = $(OPTRILIB) $(SOSLIB) $(LIALIB) $(BASICLIB)		

XDISPLAYLIB = $(LIBDIR)/$(LIBARCH)/libXdisplay.a
#########################################################################
PGM = r.cost
LIST =  $(OBJARCH)/main.o \
	$(OBJARCH)/btree.o
#EXTRA_CFLAGS = -p
#LDFLAGS = -p

$(BIN_ALPHA_CMD)/$(PGM): $(LIST) $(GISLIB) $(DISPLAYLIB) $(SEGMENTLIB)
	$(CC) $(LDFLAGS) -o $@ $(LIST) $(DISPLAYLIB) $(GISLIB) $(SEGMENTLIB) $(MATHLIB) $(XDRLIB)

$(GISLIB): #
$(DISPLAYLIB): #
$(SEGMENTLIB): #

$(OBJARCH)/delete.o: cost.h
$(OBJARCH)/insert.o: cost.h
$(OBJARCH)/main.o: cost.h
$(OBJARCH)/main.o: stash.h

$(OBJARCH)/btree.o: btree.c
	rm -f $@
	$(CC) $(CFLAGS) -c btree.c
	mv btree.o $@
$(OBJARCH)/main.o: main.c
	rm -f $@
	$(CC) $(CFLAGS) -c main.c
	mv main.o $@
#########################################################################
# the tags file created by "make ctags" is great for
# editing to look for function definitions
# vi -t <function name>

ctags:
	ctags *.[ch]
	sed 's/\?/\//g' tags > tags.tmp
	mv tags.tmp tags
tags: ctags ; #
