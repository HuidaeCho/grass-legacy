


Gmfilter(2G)         GRASS Reference Manual          Gmfilter(2G)



NAME
     Gmfilter - Cell matrix filter
     (G Language Tool)

SYNOPSIS
     Gmfilter  [-v0] if=input of=output ff=filterfile [repeat=n]
               [title=title]

DESCRIPTION
     Gmfilter filters the input to produce the output according
     to the matrix filter designed by the user (see FILTERS
     below).  The filter is applied n times (default 1).  The
     output cell can be given a title if desired.  (The title
     should be put in quotes if it contains more than one word.)

FILTERS
     The filterfile is a normal UNIX ascii file designed by the
     user.  It has the following format:

     TITLE     title
     MATRIX    n
               .
     n lines of n integers
               .
     DIVISOR   d
     START     UL/LL/UR/LR
     TYPE      S/P


     TITLE     A one line title for the filter. If a title was
               not specified on the command line, it can be
               specified here. This title would be used to
               construct a title for the resulting cell It should
               be a one line description of the filter.

     MATRIX    The matrix (n x n) follows on the next n lines.  n
               must be an odd integer greater than or equal to 3.
               The matrix itself is n rows of n integers.  The
               integers must be separated from each other by at
               least 1 blank.

     DIVISOR   The filter divisor is d. If not specified, the
               default is 1.  If the divisor is zero (0), then
               the divisor is dependent on the in the
               neighborhood (see HOW THE FILTER WORKS below).

     START     This specifies the starting corner for the filter.
               This also specifies the movement of the filter.
               If not specified, the default is UL.

               UL   Upper left (to lower right)




GRASS 3.2                U.S. Army CERL                         1






Gmfilter(2G)         GRASS Reference Manual          Gmfilter(2G)



               UR   Upper right (to lower left)

               LL   Lower left (to upper right)

               LR   Lower right (to upper left)

     TYPE      The filter type.  S means sequential, while P mean
               parallel.  If not specified, the default is S.

               Sequential filtering happens in place. As the
               filter is applied to the the that were changed in
               neighboring cells affect the resulting of the
               current cell being filtered.

               Parallel filtering happens in such a way that the
               original are used to produce the new


     More than one filter may be specified in the filter file.
     The additional filter(s) are described just like the first.
     For example, the following describes two filters:

EXAMPLE FILTER FILE
     TITLE     3x3 average, non-zero data only, followed by 5x5 average
     MATRIX    3
     1 1 1
     1 1 1
     1 1 1
     DIVISOR   0
     START     UL
     TYPE      P

     MATRIX    5
     1 1 1 1 1
     1 1 1 1 1
     1 1 1 1 1
     1 1 1 1 1
     1 1 1 1 1
     DIVISOR   25
     START     UL
     TYPE      P

HOW THE FILTER WORKS
     The filter process produces a new value for each cell in the
     input by multiplying the of the cells in the n x n
     neighborhood around the center cell by the corresponding
     matrix value and adding them together. If a divisor is
     specified, the sum is divided by this divisor, rounding to
     the nearest integer.  (If a zero divisor was specified, then
     the divisor is computed for each cell as the sum of the
     MATRIX values where the corresponding input cell is non-
     zero.)



GRASS 3.2                U.S. Army CERL                         2






Gmfilter(2G)         GRASS Reference Manual          Gmfilter(2G)



     If more than one filter step is specified, either because
     the repeat value was greater than one or because the filter
     file contained more than one matrix, these steps are
     performed sequentially. This means that first one filter is
     applied to the entire input to produce an intermediate
     result. Then the next filter is applied to the intermediate
     result to produce another intermediate result, and so on
     until the final filter is applied. Then the output cell is
     written.

OPTIONS
     -0   The filter is applied only to zero values in the input
          cell The non-zero are not changed. Note that if there
          is more than one filter step, this rule is applied to
          the intermediate - only zero which result from the
          first filter will be changed. In most cases this will
          NOT be the desired result.  Hence -0 should be used
          only with single step filters.



     -v   Gmfilter will normally print messages to indicate what
          is is doing as it proceeds. Specifying -v will make it
          run silently.

NOTES
     If the resolution of the does not agree with the resolution
     of the unintended resampling of the original data may occur.
     The user should be sure that the is set properly.


SEE ALSO
     neighbors[1]

AUTHOR
     Michael Shapiro, U.S. Army Constuction Engineering
     Laboratory


















GRASS 3.2                U.S. Army CERL                         3



