


Pmap(2P)             GRASS Reference Manual              Pmap(2P)



NAME
     Pmap - Command language interface to color hardcopy output.

SYNOPSIS
     Pmap [scale=scale] [<scriptfile]

DESCRIPTION
     Pmap is a command language interface used to produce
     hardcopy maps on the user's system's color printer. Pmap is
     more robust than paint. However, since it is command
     language driven for greater versatility, there is little
     on-line user prompting or help. In order to use Pmap
     properly, the user is advised to be prepared and
     knowledgeable of the required inputs before running Pmap.

     NOTE: Before running Pmap, the user must tell the paint
     system which device to use.  See manual entries for paint[1]
     or Pselect[2P] for details.

     Once the user types the command Pmap, a (>) prompt will
     appear.  The following commands may be selected at the
     prompt (for a list of these commands, type help at the (>)
     prompt). Those commands that require further subcommands are
     indicated by an (S) below:


     cell          to select a cell for output

     sites(S)      to select a site for output

     vector(S)     to select a vector for output

     labels        to select a file for output

     window(S)     to place a outline on the map output

     grid(S)       to output a coordinate grid

     outline(S)    to outline the areas of the cell with a
                   specified color

     colortable    to include the color table for the cell in the
                   legend below the map

     colormode     to select the appropriate method to color maps

     comments(S)   to make comments which will be printed below
                   the map

     read          to provide Pmap with a previously prepared
                   input stream.




GRASS 3.2                U.S. Army CERL                         1






Pmap(2P)             GRASS Reference Manual              Pmap(2P)



     verbose       to change the amount of talking Pmap will do

     scale         to select a scale for the output map

     setcolor      to change the color of the output map

     defpat(S)     to define area fill patterns to be used in
                   later commands

     setpat        to impose a (previously defined) pattern on a
                   cell category

     text(S)       to place text at the requested on the map

     line(S)       to place other lines on the output map

     point(S)      to place additional points or icons on the
                   output map

     end           to terminate input and begin painting the map


     During interactive usage, the user knows that additional
     subcommands are expected when a >>> begins a line (see
     section below entitled THE COMMANDS for more information on
     commands and subcommands). Once all subcommands have been
     entered, enter the subcommand end to return to command
     level. When the user is finished entering all Pmap commands,
     enter a final end command at the (>) prompt and Pmap will
     begin generating the output map.


COMMAND LINE INPUTS
     A user may choose to run Pmap by directing a previously
     prepared script file into Pmap at the command line. This
     Pmap script file must contain appropriate Pmap commands and
     subcommands. Do NOT enter the (>) or the >>> prompts in the
     script file. When preparing a Pmap scriptfile, indenting the
     subcommands is allowed (NOTE: DO NOT indent defpat patterns,
     see section on defpat below for details.) This prepared
     script file may then be submitted on the Pmap command line:

          Pmap < scriptfile

     The output scale can also be designated on the command line.
     When directing a script file into Pmap, the scale set on the
     command line will override the scale set in the script file.

          Pmap scale = scale < scriptfile

     These options allow fast, repeated submissions and/or slight
     modifications of the input parameters.  In fact, it is



GRASS 3.2                U.S. Army CERL                         2






Pmap(2P)             GRASS Reference Manual              Pmap(2P)



     expected that most Pmap output will be generated by this
     method.


NAMED COLORS
     The following are the colors that are accepted by Pmap :

          aqua black blue brown cyan gray green grey indigo
          magenta orange purple red violet white yellow


ICONS VERSUS PATTERNS
     Icons and patterns as used in Pmap are not the same thing.
     Patterns are defined and are normally used to cover those
     extended areas covered by a cell category. A pattern will
     repeat above, below and adjacently to itself.  Icons are
     normally associated with a specific point in a GRASS sites


THE COMMANDS
     The following sections describe the commands in more detail.
     The correct format and an example using the command is given
     for each command. (NOTE: Indenting input is allowed in Pmap.
     This is especially useful when creating a scriptfile to keep
     commands and subcommands orderly. However, do NOT indent
     when using the defpat command, as all leading blanks are
     interpreted as 0's). Where appropriate, the user may get a
     listing of available input for each command or subcommand
     simply by entering:
     command list (for example, cell list).


CELL
     Cell is used to select the cell to be output. For each Pmap
     run, only one cell can be requested. If no cell is
     requested, an all white map will be produced.  It can be
     useful to select no cell in order to provide a white
     background for vector images.

     FORMAT:                     EXAMPLE:
     >cell cellmapname/list      >cell soils

     EXAMPLE: This would paint a map of the cell soils.


SITES
     Sites allows a selected to be placed on the output map (for
     more information on see manual entry for sites[1]).  The
     subcommands allow the user to assign:

     1) the color for the sites;




GRASS 3.2                U.S. Army CERL                         3






Pmap(2P)             GRASS Reference Manual              Pmap(2P)



more
     2) the icon to be used to represent the presence of a site (for
             information on icon files, see the icons section of
          the paint[1]
             manual entry);

it is in
     3) the size of the icon (in number of times larger than the size
             the icon file);

also to be
     4) whether or not the description associated with each site is
             printed.

     FORMAT:                     EXAMPLE:
     >sites sitemap/list         >sites windmills
     >>>color color              >>>color blue
     >>>icon iconfile/list       >>>icon windmill
     >>>size #                   >>>size 2
     >>>desc [y/n]               >>>desc y
     >>>end                      >>>end

     Example: This would paint a map with blue windmills (from an
     icon file created by the user) placed at all windmill (from
     a These windmills would be 2 times larger than the size of
     the icon in the icon file and have descriptions (from the
     printed next to them.


VECTOR
     Vector is used to select a vector for output.  The
     subcommands allow the user to assign:

     1) the color for the vector
          lines;

     2) the width of the lines in pixels;

     3) the highlight color (hcolor) for the vector
          lines;

     4) the width of the highlight color (hwidth) in pixels;

     5) the line style (the style option allows the vector
          lines
             to be dashed in different patterns and colors. This
          is done by typing a
             series of numbers (0-9) in a desired sequence or
          pattern. Colors for the
             numbers (1-9) can be assigned using the color
          subcommand. 0's and
             non-digit characters are recognized as blanks. Using



GRASS 3.2                U.S. Army CERL                         4






Pmap(2P)             GRASS Reference Manual              Pmap(2P)



          0 would allow the
             colors of the cell or the background color (if no
          cell was
             selected), to show through.

     6) whether or not the
          is to be masked (i.e., if the vector
             is also to stop being painted when "no data" are
          encountered,
             see manual entry mask[1] for more information on
          masks).

     FORMAT:                     EXAMPLE 1:                  EXAMPLE 2:
     >vector vectormap/list      >vector streams             >vector roads
     >>>color [#] color          >>>color blue               >>>width 2
     >>>width #                  >>>width 2                  >>>style 001122
     >>>hcolor color             >>>hcolor white             >>>color 1 black
     >>>hwidth #                 >>>hwidth 1                 >>>color 2 red
     >>>style  0-9               >>>masked y                 >>>masked n
     >>>masked [y/n]             >>>end                      >>>end
     >>>end

     Example 1: This would paint a map of the vector streams.
     These streams would be a total of 3 pixels wide (the inner
     two pixels blue and the outer highlight pixel white). The
     map would not show streams outside of the current mask.

     Example 2: This would paint a map of the vector roads. These
     roads would be 2 pixels wide and would be dashed blank-
     black-red (the blank areas would show what lies under the
     roads). This map would show roads inside and outside of the
     current mask.


LABELS
     Labels is used to select a file to be output (see the
     section labels of the paint[1] manual entry for more
     information on files).

     FORMAT:                     EXAMPLE:
     >labels  labelfile/list     >labels town.names

     Example: This would paint labels (from the file called
     town.names). Presumably, these labels would indicate the
     names of towns on the map.


WINDOW
     Window allows the user to place the outline of a smaller
     upon the output
      can be created and saved using the window[1] or the
     Gwindow[2] functions in GRASS; see these manual entries for



GRASS 3.2                U.S. Army CERL                         5






Pmap(2P)             GRASS Reference Manual              Pmap(2P)



     more information). The smaller can be used to show a
     subsection of an area, to which other painted maps are
     intended to refer.  The subcommands allow the user to
     assign:

     1) the color of the border.

border
     2) the width (in pixel units) of the border. Defaults are a black
             of one pixel width.

     FORMAT:                     EXAMPLE:
     >window windowfile/list     >window subwindow
     >>>color color              >>>color white
     >>>width #                  >>>width 2
     >>>end                      >>>end

     Example: This would place a white outline, 2 pixels wide, of
     the called subwindow, onto the output map. This would have
     been created and saved in the via window[1] or Gwindow[2].


GRID
     Grid overlays a coordinate grid onto the output map. The
     spacing of the grid is given (in the system units) on the
     command line. The subcommands allow the user to specify;

     1) the color of the grid lines;

whether it
     2) whether or not the grid lines should be numbered (and if so,
             should it be numbered every grid line (#=1), every
          other grid line
             (#=2), etc., and what color the numbers should be).
          The defaults are
             black grid lines, unnumbered.

     FORMAT:                     EXAMPLE:
     >grid spacing               >grid 10000
     >>>color color              >>>color green
     >>>numbers # [color]        >>>numbers 2 red
     >>>end                      >>>end

     EXAMPLE: (For a UTM-based This would overlay a green grid
     with a spacing of 10000 meters onto the output map.
     Alternate grid lines would be numbered with a red UTM.


OUTLINE
     Outline allows the user to outline areas of a cell
      The subcommand color allows the user to specify the color
     of the outline (default = black). It is important the user



GRASS 3.2                U.S. Army CERL                         6






Pmap(2P)             GRASS Reference Manual              Pmap(2P)



     enter the subcommand end even if a color is not chosen. (It
     is expected that in the future, the outline of a different
     cell map other than the one currently being painted may be
     placed on the map.)

     FORMAT:                     EXAMPLE:
     >outline                    >cell soils
     >>>color  color             >outline
     >>>end                      >>>color grey
                                 >>>end

     EXAMPLE: This would outline the category areas of the cell
     soils in grey.


COLORTABLE
     Colortable allows the user to print a color table below the
     map as part of the legend.  The color table will display the
     colors for each cell category and the category To get a
     color table, you must have previously requested a cell
      Omitting the colortable command would result in the default
     of no color table. Note: Be careful about asking for color
     tables for cell
      which have many categories, such as elevation. This could
     result in an extremely long color table!!!!!

     FORMAT:                     EXAMPLE:
     >colortable [y/n]           >colortable y

     EXAMPLE: This would print a color table as part of the
     legend to the map.


COLORMODE
     Colormode allows the user to select the method used to
     render color for There are two methods, normal and image.
     From a user perspective, normal should be used for normal
     such as soils, and image should be used for images, such as
     Landsat images or NHAP photos.  The normal mode treats each
     pixel independently, giving it the printer color that best
     approximates the true color.  The image mode "blends" colors
     from pixel to pixel. Each pixel gets the printer color that
     best approxmiates the true color, but the difference between
     the printed color and the true color is carried over to the
     pixels below and to the right.  The default is normal.

     FORMAT:                     EXAMPLE:
     >colormode [normal/image]   >colormode image

     EXAMPLE: This would select the image colormode. The
     assumption is that the cell being printed is an image or a
     picture, e.g., one band from an NHAP photo, or a color



GRASS 3.2                U.S. Army CERL                         7






Pmap(2P)             GRASS Reference Manual              Pmap(2P)



     composite from a Landsat scene, etc.


COMMENTS
     Use comments if you would like comments to appear below the
     painted map itself. You may submit comment text line by line
     during Pmap execution or a via a prepared comments file.

     FORMAT:                     EXAMPLE 1:                  EXAMPLE 2:
     >comments [commentsfile]    >comments                   >cell vegetation
     >>>comment text             >>>This is a comment.       >comments veg.comments
     >>>end                      >>>end                      >>>end

     EXAMPLE 1: This would print the comment "This is a comment"
     in the legend below the map.

     EXAMPLE 2: This would print whatever was in the comments
     file in the legend below the map. In this case, the comments
     file may contain comments pertaining to the cell vegetation,
     such as "This map was created by classifying a LANDSAT TM
     image".


READ
     Read allows the user to read any previously prepared UNIX
     file into Pmap.  Note: Pmap will not search for this file.
     The user must be in the correct directory or specify the
     full path on the read command line (~ won't work with this
     command).

     FORMAT:                               EXAMPLE:
     >read previously prepared UNIX file   >read pmap.roads

     EXAMPLE: This example reads the UNIX file pmap.roads into
     Pmap.  This file may contain all the Pmap commands and
     subcommands for placing the vector roads onto the output
     map. The user may have created this file because this vector
     is particularly useful for many Pmap outputs. By using the
     read command, the user need not enter all the input for the
     sites command, but simply read the previously prepared file
     with the correct commands.


VERBOSE
     Verbose changes the amount of talking Pmap will do while
     painting the map. A higher value implies more chatter. The
     default is 2.

     FORMAT:                     EXAMPLE:
     >verbose [0/1/2]            >verbose 0

     EXAMPLE: This would set the amount of chatter Pmap will do



GRASS 3.2                U.S. Army CERL                         8






Pmap(2P)             GRASS Reference Manual              Pmap(2P)



     to a minimum.


SCALE
     Scale selects a scale for the output map. The scale can be
     selected either as:

     1) a relative ratio, e.g.  1:25000;

     2) an absolute width of the printed map, e.g. 10 inches;

     3) the number of printed paper panels, e.g. 3 panels;

     4) the number of miles per inch e.g., 1 inch equals 4 miles.

     FORMAT:                     EXAMPLE:
     >scale scale                >scale 1:25000

     EXAMPLE: This example would set the scale of the map to 1
     unit = 25000 units. (NOTE: When setting the scale at the
     command line, setting it again here would override the scale
     set at the command line. On the other hand, if Pmap commands
     were entered via a scriptfile, setting the scale at the
     command line would override the scale set in the
     scriptfile.)


SETCOLOR
     Setcolor is used to override the default color for one or
     more categories of the cell Setcolor can be requested more
     than once to override the default color for additional
     categories. More than one category can be changed for each
     request by listing all the category separated by commas, but
     with no spaces.

     FORMAT:                     EXAMPLE:
     >setcolor cat(s) color      >cell watersheds
                                 >setcolor 2,5,8 white
                                 >setcolor 10 green

     EXAMPLE: This would set the color for categories 2,5 and 8
     of the cell watersheds to white and category 10 to green.
     (NOTE: no spaces are inserted between the category


DEFPAT
     Defpat is used to define new patterns for the output map.
     The defined pattern can then be assigned to a category by
     setpat (see below). A defpat file can also be created as a
     UNIX file and used by requesting read and then the UNIX file
     name before using the setpat command. (NOTE: Do NOT indent
     the pattern. Any blank spaces will be interpreted as 0's.)



GRASS 3.2                U.S. Army CERL                         9






Pmap(2P)             GRASS Reference Manual              Pmap(2P)



     The pattern is given a name on the defpat command line. The
     user is then prompted to enter the pattern one line after
     another. The pattern is composed of a sequence of numbers
     0-9. Zeros are blanks and 1-9 can be given any of the named
     colors. The default color for all the digits will be white
     unless specified by using the color subcommand.  The color
     option will begin by entering the word color at the >>>
     prompt, followed by one of the digits (1-9) in the pattern,
     followed by one of the NAMED COLORS. This should be repeated
     for each of the digits specified to avoid using white.
     After entering end, the user can define more patterns by
     entering defpat again.

     FORMAT:                     EXAMPLE 1:                  EXAMPLE 2:
     >defpat name                >defpat horiz               >defpat vert
     >>>enter pattern            >>>1                        >>>1000
     >>>color # color            >>>0                        >>>color 1 green
     >>>end                      >>>0                        >>>end
                                 >>>0
                                 >>>color 1 black
                                 >>>end

     EXAMPLE 3:                  EXAMPLE 4:
     >defpat diag                >defpat tree
     >>>00001                    >>>     2
     >>>0001                     >>>    222
     >>>001                      >>>   22122
     >>>01                       >>>  22 1 22
     >>>1                        >>>      1
     >>>color 1 red              >>>
     >>>end                      >>>               2
                                 >>>              222
                                 >>>             22122
                                 >>>            22 1 22
                                 >>>                1
                                 >>>color 1 orange
                                 >>>color 2 black
                                 >>>end

     EXAMPLE 1: This would create a black horizontal pattern.

     EXAMPLE 2: This would create a green vertical pattern.

     EXAMPLE 3: This would create a red diagonal pattern.

     EXAMPLE 4: This would create a two-toned tree pattern with
     orange trunks and green leaves.


SETPAT
     Setpat is used to assign a user defined pattern to a
     category. The user can choose to use:



GRASS 3.2                U.S. Army CERL                        10






Pmap(2P)             GRASS Reference Manual              Pmap(2P)



     1) a pattern created using defpat (see above);

     2) the patterns built into Pmap;

     3) all the patterns the user may have created in a UNIX file.

     FORMAT:                          EXAMPLE 1:                  EXAMPLE 2:
     >setpat cat defpat/builtin/all   >cell veg                   >cell soils
                                      >setpat 3 vert              >read horiz
                                      >setpat/fR 10 tree          >setpat 5 horiz

     EXAMPLE 1: This assigns the vertical pattern created using
     defpat (example 2 in defpat above) to category 3 of the cell
     vegetation and the tree pattern (example 4 in defpat above)
     to category 10.

     EXAMPLE 2: This uses a previously prepared UNIX file with
     the correct defpat commands for creating a black horizontal
     pattern (see example 1 in defpat above) and assigns that
     pattern to category 5 of the cell soils via the setpat
     command.


TEXT
     Text is used to place text at the requested on the map.
     Text requests can be submitted more than once to place
     different (or the same) text at different More than one line
     of text can be submitted by notating the end of a line with
     a \n (e.g.: text\nmoretext).  The user specifies where the
     text will be placed by providing map coordinates or
     percentages of window.  The desired text follows on the same
     command line. Subcommands allow the user to assign:

     (1)  the the text font. The available fonts are:

             cyrilc gothgbt gothgrt gothitt greekc greekcs greekp
             greeks italicc italiccs italict romanc romancs
             romand romans romant scriptc scripts

          The default font is romans;

     (2)  the color of the text;

     (3)  the width which determines the line thickness of the
          letters. (The default is 1 pixel; larger numbers can be
          used to simulate bold face);

     (4)  the highlight color (hcolor);

     (5)  the width of the highlight color (hwidth);

     (6)  the text-enclosing-box background color;



GRASS 3.2                U.S. Army CERL                        11






Pmap(2P)             GRASS Reference Manual              Pmap(2P)



     (7)  the text box border color;

     (8)  the text size as the vertical height of the letters in
          meters on the ground. (Thus, text size will grow or
          shrink depending on the scale at which the map is
          painted);

     (8)  the reference point. This reference point tells Pmap
          what part of the text should be placed on the specified
          by the map coordinates.  Reference points can refer to:
          [lower/upper/center],[left/right/center] of the text to
          be printed);

     (10) the yoffset (which provides finer placement of text by
          shifting the text a vertical distance in pixels from
          the specified north. The vertical offset will shift the
          to the south if positive, north if negative);

     (11) the xoffset (which shifts the text a horizontal
          distance in pixels from the specified east The
          horizontal offset will shift the east if positive, west
          if negative).

     (12) whether or not the text should be opaque to vectors.
          Entering no to the opaque option will allow the user to
          see any which go through the text's background box.
          Otherwise, they will end at the box's edge.

     FORMAT:                     EXAMPLE:
     >text  east north text      >text 650000 7365000 SPEARFISH LANDCOVER
     >text  x% y% text           >>>font romand
     >>>font fontname            >>>color red
     >>>color color/none         >>>width 2
     >>>width #                  >>>hcolor black
     >>>hcolor color/none        >>>hwidth 1
     >>>hwidth #                 >>>background white
     >>>background color/none    >>>border red
     >>>border color/none        >>>size 500
     >>>size #                   >>>ref lower left
     >>>ref reference point      >>>opaque y
     >>>xoffset #                >>>end
     >>>yoffset #
     >>>opaque [y/n]
     >>>end

     EXAMPLE: (For a UTM-based This would place the text
     SPEARFISH LAND COVER at the UTM coordinates E650000
     N7365000. The text would be a total of 3 pixels wide (2
     pixels of red text and 1 pixel black highlight), have a
     white background enclosed in a red box, and be 500 meters in
     size. The lower right corner of the text would be centered
     over the UTM coordinates provided. All on the map would stop



GRASS 3.2                U.S. Army CERL                        12






Pmap(2P)             GRASS Reference Manual              Pmap(2P)



     at the border of this text.


LINE
     Line is used to place additional lines on the output map.
     The line command can be entered several times, if more than
     one line is desired. The beginning and end points of the
     line are entered in the command line. These end points can
     defined either by map coordinates or by using percentages of
     the window.  Subcommands allow the user to assign:

     1) the line's color;

     2) its width in number of pixel units;

will
     3) whether or not it is to be masked (i.e., whether these lines
             appear outside the current mask. See manual entry
          for mask[1] for more
             information on masks).

     FORMAT:                       EXAMPLE:
     >line east north east north   >line 10% 80% 30% 70%
     >line x% y% x% y%             >>>color yellow
     >>>color color                >>>width 2
     >>>width #                    >>>masked n
     >>>masked [y/n]               >>>end
     >>>end

     EXAMPLE: This would draw a yellow line from the point (x=10%
     y=80% of the total window) to the point (x=30% y=70% of the
     total window). This line would be 2 pixels wide and would
     not be masked by the current mask.


POINT
     Point is used to place additional points or icons on the
     output map. The point command can be entered several times,
     each time for an additional point. The point location is
     entered in the command line by giving either the map
     coordinates or by using percentages of the window.
     Subcommands allow the user to assign:

     1) the color of the point;

the
     2) the icon file to be used to represent the point location. (See
             icon section in the paint[1] manual entry for more
          information
             on creating icons);

     3) its size in integer multiples of the pattern in the icon file;



GRASS 3.2                U.S. Army CERL                        13






Pmap(2P)             GRASS Reference Manual              Pmap(2P)



will appear
     4) whether or not it is to be masked (i.e., whether the icons
             outside of the current mask. See manual entry for
          mask[1] for more
             information on masks.)

     FORMAT:                     EXAMPLE:
     >point east north           >point 456000 7890000
     >point x% y%                >>>color purple
     >>>color color              >>>icon diamond
     >>>icon iconfile/list       >>>size 1
     >>>size #                   >>>masked n
     >>>masked [y/n]             >>>end
     >>>end

     EXAMPLE: This would place a purple diamond (from icon file
     diamond) at the point (E456000 N7890000). This diamond would
     be the same size it is in the diamond icon file and would
     not be masked by the current mask.


END
     End is used when all other desired commands have been
     entered. This final end command must be present to terminate
     input and begin painting the map.

     FORMAT:
     >end



























GRASS 3.2                U.S. Army CERL                        14






Pmap(2P)             GRASS Reference Manual              Pmap(2P)



EXAMPLE Pmap SCRIPT FILE
     The following is an example of a Pmap script file called
     spear.soils. (For the purposes of illustration, the file is
     in two columns.) This script file can be entered at the
     command line:

          Pmap < spear.soils

                            (cont.)
     cell soils             defpat diag
     vector streams         000001
        color blue          00001
        width 2             0001
        hcolor white        001
        hwidth 1            01
        masked y            1
        end                    color 1 red
     vector roads              end
        width 2             setpat 4 diag
        style 001122        text 608000.00 3476004.73 SPEARFISH SOILS MAP
        color 1 black          color red
        color 2 red            width 2
        masked n               hcolor black
        end                    hwidth 1
     labels town.names         background white
     window subwindow          border red
        color white            size 500
        width 2                ref lower left
        end                    opaque y
     grid 10000                end
        color green         line 606969.73 3423092.91 616969.73 3423092.91
        numbers 2 red          color yellow
        end                    width 2
     outline                   opaque yes
        color black            end
        end                 point 40% 60%
     colortable y              color purple
     comments                  icon diamond
        This is a comment      size 2
        end                    masked n
     scale 1:25000             end
     setcolor 6,8,9 white   end
     setcolor 10 green


SEE ALSO
     paint[1]      For interactive paint use
     Pselect[2P]   To select the painter

AUTHOR
     Michael Shapiro, U.S. Army Construction Engineering Research
     Laboratory



GRASS 3.2                U.S. Army CERL                        15






Pmap(2P)             GRASS Reference Manual              Pmap(2P)























































GRASS 3.2                U.S. Army CERL                        16






