.\" %W% %G%
.TH neighbors 1 CERL-GIS
.SH NAME
neighbors \- GIS data enhancement capability
.br
.I (Available through gis menu)
.SH SYNOPSIS
.B neighbors 
.SH DESCRIPTION
An interactive program to enhance or subdue data values
by modifying a data value based on its surroundings.
.SH DEFINITIONS
.I Neighborhood Size:
The neighborhood size specifies which cells surrounding any given
cell form the neighborhood for that cell.  The size must be an odd
integer. For example:
.NF
                              _ _ _
                             |_|_|_| 
    3 x 3 neighborhood --->  |_|_|_|
                             |_|_|_|
.FI
.I Neighborhood Operations:
The neighborhood operations determine what new value a center cell
in a neighborhood will have after examining the neighboring cells. 
Each cell in a data layer becomes the center cell of a neighborhood 
as the neighborhood window moves from cell to cell throughout the
data layer.
.I Neighbors
can perform the following operations:

.IP \fBmode\fR
.br
The most frequently occurring value in the neighborhood.
.IP \fBmin\fR
.br
The minimum value within the neighborhood.
.IP \fBmax\fR
.br
The maximum value within the neighborhood.
.IP \fBave\fR
.br
The average value within the neighborhood.
This is a weighted average so that in the
following example, the result would be:
.br
.ti +5
(7*4 + 6 + 5 + 4*3)/9 + 0.5 = 6.16
.br
The result is rounded to the nearest integer.

.NF
       Raw Data     Operation     New Data
   ----------------          ----------------
   | 7  | 7  |  5 |          |    |    |    |
   |----|----|----| average  |----|----|----|
   | 4  | 7  |  4 |--------->|    |  6 |    |
   |----|----|----|          |----|----|----|
   | 7  | 6  |  4 |          |    |    |    |
   |----|----|----|          |----|----|----|
.FI

.IP \fBdiversity\fR
.br
The number of different values within the neighborhood.
In the above example, the diversity is 4.
.IP \fBinterspersion\fR
.br
The number of categories which differ from the center
category.  In the above example, the interspersion is 5.
.SH EXAMPLE
Here is a simple example demonstrating input to neighbors.
Note, user input is
.I underlined or italicized.

.in +.3i
.NF
NEIGHBORS: neighborhood UTILITY

LOCATION: sample    MAPSET:   GENERAL

This program creates a new cell file from an existing cell file.
Each new cell value is derived from the cells within a neighborhood
of the original cell.

You will asked for the name of an existing cell file and the name of
a new cell file to hold the results. The new cell file will be created
in the current mapset.

You will then be asked to specify the size of the neighborhood, which
is an N x N square surrounding each cell, and to select the method
to compute the new cell values.

Enter the name of an existing cell file
Enter 'list' for a list of existing cell files
Hit RETURN to cancel request
cell file name> \fIold\fR\&

Enter a new cell file name
Enter 'list' for a list of existing cell files
Hit RETURN to cancel request
cell file name> \fInew\fR\&


Please select the method for computing new cell values

   1  mode          - most frequently occurring category
   2  min           - lowest category
   3  max           - highest category
   4  ave           - average category
   5  diversity     - number of different categories
   6  interspersion - number of categories different from the center

Enter <exit> to quit
choice> \fI3\fR\&

method selected: max - highest category
Please set the neighborhood size.

  1 for the center cell alone
  3 for a 3 x 3 neighborhood around the center cell
  5 for a 5 x 5 neighborhood around the center cell
  7 for a 7 x 7 neighborhood around the center cell
  etc.
enter <exit> if you want to exit> \fI3\fR\&

.in
.FI
.SH NOTES
.B Neighbors
works in the current window with the current mask, if any.
It is recommended, but not required,
that the window resolution be the same as that of the cell file.
If the resolutions differ, the user will be notified and asked if
it is ok to proceed.
.SH "AUTHOR"
Michael Shapiro, U.S. Army Construction Engineering Research Laboratory
