.\" %W% %G%
.TH support 1
.SH NAME
support \- Create/correct cell map support files
.br
.I (Available through 
.B grass3
.I menu)
.SH SYNOPSIS
.B support
.SH DESCRIPTION
The GRASS tool \fIsupport\fR
provides a means to create and modify necessary cell map 
.XT layer 
support files.
It may be run only on cell 
.CT files maps
in the current mapset.  Various GRASS
programs depend on one or more of the following \fIsupport\fR files:
.IP CELLHD 10
The cell header file describes where and how the cell 
.CT file map
information fits with reference to other cell 
.CT "files." "maps."
Without it, the cell 
.CT file map
could not be displayed or analyzed properly.
The user has the option to change the # of columns, # of 
bytes per cell, and default 
.CT "" geographic
window information. Usually, this
information would not be changed.
.IP STATS
The stats associated with the cell 
.CT file map
is a histogram of the
.CT data category
values which occur in the cell 
.CT "file." "map."
.IP CATS
The category support file associates 
.CT "" cell
map category 
.CT numbers values
with a description of each category. The user may add or
edit the description of these categories.
.IP COLR
The color support file associates 
.CT "" cell
map category 
.CT numbers values
with a color for each category. The user may assign an
original or choose a new color table.
.IP HIST
This provides some historical information about the 
.CT "map layer." "cell map."
The user may add or edit the title, map type, data source
or data description of the cell map.  (Note that the specification
of map type here is somewhat archaic, and should always be set to
\fIcell\fR.)
.PP
.SH NOTES
The
.I support
program attempts to verify that the information in the cell header is
reasonable.
The data format specified in the header is verified against the cell 
.CT file map
itself. This includes checking that files which the header indicates
are
.I compressed
are really compressed, and that the number of rows and columns specified
in the header correspond to the actual file size.

The \fIsupport\fR program can also be used to determine the number
of columns and rows in the case that no cell header is available for a file.
This might occur, for example, when a cell file is used which was not
produced by GRASS.

If the file is not compressed, the file size should be the product of the
number of rows and columns.
If the file is compressed, this test can not be performed since the
file size will bear no relation to the product.  The number
of rows can still be verified, but the number of columns cannot.
.PP
To compute or correct the
.I stats,
the cell header must be correct
since the cell file is read to determine the stats.
.PP
If a new 
.I cats
or
.I color
file is required, the 
.I stats
must be correct.
.PP
The user is allowed to change the number of categories
specified in the category file. This should only be done if the
user knows that the maximum category value in the cell 
.CT file map
is different than what is recorded in the category file. Changing
the 
.CT "" category
value in the
.I cats
file allows the user to add more category labels, or to remove labels.
It does NOT change the 
.CT "" category
values in the cell 
.CT file map
itself.
.PP
The
.I color
file is unique among \fIsupport\fR files.
GRASS usually does not allow a user to modify another user's data.
However, it is essential that users be able to create color tables for
.CT "data layers" "cell maps"
which are not theirs.
The
.I color
file for a 
.CT "data layer" "cell map"
is located in the directory "$LOCATION/colr" and
cannot be modified or removed by another user.
New or modified color tables for 
.CT layers "cell maps"
which are not in the
current mapset
are actually stored in a
.I secondary color
file.  This secondary color table will be
at "$LOCATION/colr2/<mapset>"
where <mapset> is the mapset of the 
.CT "data layer" "cell map"
in question.
In versions of GRASS prior to 3.0, this was also the case for
color tables in the user's own mapset.  Now, however, if a user modifies
color tables associated with 
.CT "" cell
maps in the current mapset, these changes
will be made to the user's original color file (i.e., whatever color table
was previously there will be overwritten).  No secondary color files are
created for cell 
.CT files maps
in the user's own mapset.

Note that the variable $LOCATION is only set when the
user is running under the command-driven version of GRASS (GRASS3).
For more information regarding the location and function of GRASS
support files, consult the 
.I GRASS Programmer's Manual
chapter on "GRASS Database Structure."
.SH WARNING
In order to modify the \fIcell header\fR,
the cell 
.CT file map
under consideration must not be a 
.I reclass
.CT "file." "cell map."
This is because the header does not contain positional information, but
rather a reference to another cell 
.CT "file." "map."
Thus it shares a cell header
with the referenced 
.CT "file." "cell map."
In order to change the header,
.I support
must
be run on the referenced 
.CT "file." "map."
.SH "SEE ALSO"
\fIreclass[1], Gcell.colors[2G]\fR
.SH AUTHOR
Michael Shapiro, U.S. Army Construction Engineering Research Laboratory
