<html>
<A NAME="d.what.v.pg">
<TITLE>d.what.v.pg</TITLE>
<body bgcolor="#FFFFFF" link="#0000DF" vlink="#006000">

<img src="grass.smlogo.gif">

<hr width=100% align=center size=6 no shade>

<H2>NAME</H2>
<EM><B>d.what.v.pg</B></EM> - Report database attributes associated with vector features.

<H2>SYNOPSIS</H2>
<B>d.what.v.pg</B><BR>
<B>d.what.v.pg help</B><BR>
<B>d.what.v.pg tab</B><EM>=name</EM> <B>col</B><EM>=name</EM> <B>map</B><EM>=name</EM> [<B>join</B><EM>=tab,tabkey,pkey</EM>]

<H2>ALTERNATE</H2>
<B>d.what.v.pg -s help</B><BR>
<B>d.what.v.pg -s pql</B><EM>=filename</EM> <B>map</B><EM>=name</EM> 
<H2>DESCRIPTION</H2>
Reports database attributes from the currently selected database which are associated with specific vector features identified using the mouse.  The currently selected database is identified by the GRASS environment variable $PGDBASE which is set using the <EM>g.select.pg</EM> GRASS-RDBMS interface tool.  If this environment variable is not set the program terminates with a message to the user.  If no join parameters are provided by the user on the command line the attributes in the table directly linked to the GRASS raster structure via the category value are returned.  However, if a join is specified
then attributes from a related table are displayed.  If the alternate form of this command is selected with the <EM>-s</EM> flag the user has greater control over the number of relational joins and the manner in which the attribute information is displayed.  Using the <EM>-s</EM> option the attributes from more than one table can be returned and displayed.


<H3>Parameters:</H3>
Table containing column linked to vector attribute values.  Column associated with vector attribute values.  Name of an existing vector map with attribute values linked to the cur­
rently selected database.  Tab is the table used to develop the current postQUEL query. Tabkey is the database column used to relate information in this table with data in the table linked to the GRASS category file.  Pkey is the associated column in the table linked to the GRASS category file which is related to tabkey in the current table.
<P>

For instance, assume that feature is a table containing column values associated with category values in a GRASS vector file (recordnum).  In addition, assume that cfcclookup is a table containing attribute data on the transportation network in the
same area. In this example cfcclookup.cfcc is the column linking the table cfcclookup to the table feature via feature.cfcc.  To specify a query based on attribute values in the table cfcclookup the join statement would be:
<P>

<DD><EM>join=cfcclookup,cfcclookup.cfcc,feature.cfcc</EM>

<P>
Specifying these conditions would insure that all rows from table cfcclookup which satisfy the query criteria would be matched with the corresponding rows in table feature, which are then related to the spatial features in the GRASS data layer via the database column feature.recordnum which is related to the GRASS category values.

<P>
This syntax is adequate to accomplish 2 table joins. However, if the query demands joins between more than 2 tables it is advisable to use the <EM>-s</EM> option [see Alternate Command Line Usage] to read a user prepared query, complete with join requirements, from a file.  The alternate command line usage is provided to simplify the process of retrieving information from more than one table in the query criteria. The alternate command line structure is selected using the the <EM>[-s]</EM> flag on the command line.  When using this flag the user must include the name of a text file on the command line as well.  This file must include a complete, well formed postQUEL retrieve statement specifying the query criteria and all relevant JOINS needed to retrieve values which correspond to category values in a GRASS data layer.

<P>
The user must also specify the name of the GRASS data layer containing these category values on the command line.  The following example illustrates the syntax which must be used in constructing a retrieve statement for use with the <EM>-s</EM> flag.
<P>

<DD><EM>d.what.v.pg -s pql=census.pql map=census</EM>

<P>
census.pql:<BR>
<EM>retrieve unique (cfccatts.all)<BR>
where cfccatts.tlid=?</EM>
<P>

<B>Result:</B> Reports all attributes from table cfccatts associated
with the vector at current mouse location.
<P>
<B>EXAMPLE</B><P>
<EM>d.what.v.pg -s pql=census.pql map=census</EM>

<P>
census.pql:<BR>
<EM>retrieve unique (cfccatts.all, cfcc.all)<BR>
where cfccatts.tlid = ? and cfccatts.cfcode=cfcc.cfcode</EM>
<P>

<B>Result:</B> Reports all attributes from tables cfccatts and cfcc associated with the vector at current mouse location.
<P>

<B>Flags:</B> postQUEL select statements are input from a prepared file.<P>
<B>Parameters:</B> postQUEL statements specifying well formed selection criteria.  Name of an existing vector map.
<H2>BUGS</H2>
None known.

<H2>NOTE</H2>
This program requires the Postgres database software.

<H2>SEE ALSO</H2>
<EM><A HREF="g.column.pg.html">g.column.pg</A>, <A HREF="g.select.pg.html">g.select.pg</A>, <A HREF="g.stats.pg.html">g.stats.pg</A>, <A HREF="g.table.pg.html">g.table.pg</A>, <A HREF="d.rast.pg.html">d.rast.pg</A>, <A HREF="d.site.pg.html">d.site.pg</A>, <A HREF="d.vect.pg.html">d.vect.pg</A>, <A HREF="d.what.r.pg.html">d.what.r.pg</A>, <A HREF="d.what.s.pg.html">d.what.s.pg</A>, <A HREF="r.reclass.pg.html">r.reclass.pg</A>, <A HREF="r.rescale.pg.html">r.rescale.pg</A>, <A HREF="v.reclass.pg.html">v.reclass.pg</A></EM>

<H2>AUTHOR</H2>
Original Informix SQL-tools: James A. Farley, Wang Song, and W. Fredrick Limp University of Arkansas, CAST
<P>
Postgres modifications: Janne Soimasuo, Faculty of Forestry, University of Joensuu, Finland.
<P>
Updated to GRASS 5 by Alex Shevlakov (sixote@yahoo.com)
</BODY>
</HTML>

