<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=koi8-r">
   <meta name="GENERATOR" content="Mozilla/4.77 [ru] (X11; U; Linux 2.2.19-3.asp i686) [Netscape]">
   <title>d.what.v.pg</title>
</head>
<body bgcolor="#FFFFFF" link="#0000DF" vlink="#006000">
<a NAME="d.what.v.pg"></a><img SRC="grass.smlogo.gif" >
<hr width=100% align=center size=6 no shade>
<h2>
NAME</h2>
<b><i>d.what.v.pg</i></b> - Report database attributes associated with
vector features.
<br><i></i>&nbsp;
<h2>
<font size=+2>USAGE:</font></h2>
<font size=+1>d.what.v.pg [-f] map=name tab=name col=name [color=name]</font>
<br><font size=+1>&nbsp;&nbsp; [fillcolor=name] [hv=name]</font>
<br><font size=+1>&nbsp;</font>
<br><font size=+1>d.what.v.pg [-sf] sql=file map=name [color=name] [fillcolor=name]</font>
<br><font size=+1>&nbsp;&nbsp; [hv=name]</font><i><font size=+1></font></i>
<p><font size=+1>Flags:</font>
<br><font size=+1>&nbsp; -s&nbsp;&nbsp; Use [-s] for SQL command file input.</font>
<br><font size=+1>&nbsp; -f&nbsp;&nbsp; Fill polygons?</font><font size=+1></font>
<p><font size=+1>Parameters:</font>
<br><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sql&nbsp;&nbsp;
Name of the SQL command file:</font><font size=+1></font>
<p><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; map&nbsp;&nbsp;
Vector map to run query on:</font>
<br><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tab&nbsp;&nbsp;
Postgres table with categories:</font>
<br><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; col&nbsp;&nbsp;
Column with categories from this table:</font>
<br><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; color&nbsp;&nbsp;
Selected lines color:</font>
<br><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
default: yellow</font>
<br><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fillcolor&nbsp;&nbsp;
Selected areas color (for fill):</font>
<br><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
options: red,orange,yellow,green,blue,indigo,white,black,brown,</font>
<br><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
magenta,aqua,gray,grey</font>
<br><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
default: gray</font>
<br><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hv&nbsp;&nbsp;
Type of database output - [h/v]:</font>
<br><font size=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
default: v</font>
<br><font size=+1></font>&nbsp;
<h2>
DESCRIPTION</h2>
Reports database attributes from the currently selected database which
are associated with specific vector features identified using the mouse.
The currently selected database is identified by the GRASS environment
variable $PGDBASE which is set using the <i>g.select.pg</i> GRASS-RDBMS
interface tool. If this environment variable is not set the program terminates
with a message to the user. If the alternate form of this command is selected
with the <i>-s</i> flag the user has greater control over the manner in
which the attribute information is displayed.
<p><i>d.what.v.pg</i> is used to query lines/areas with mouse. Like <i>d.what.vect</i>,
it lists attributes and optionally fills queried areas (like v.area). It
may be used for the UPDATE command in Postgres through the input SQL file
(see Example 2). The idea is to prepare an arbitrary algorithm, code it
in SQL, and then update DB with clicking on chosen polys/lines. You may
consider this as piping anything you grabbed on screen through various
filters.
<p>The database information can be optionally output as comma-sepatated
list (horizontal) which is convenient feeding it to other programs like
table editors and worksheet.
<h3>
Parameters:</h3>
<b>Tab</b> is Postgres table containing column linked to vector attribute
values, <b>col</b> - column associated with vector attribute values, <b>map</b>
is name of an existing vector map with attribute values linked to the cur­
rently selected database.
<br>&nbsp;
<p><b>EXAMPLE:</b>
<p><b>1.</b><i> d.what.v.pg -s sql=census.sql map=census</i>
<p>and census.sql is:
<p><i>select slope, type_id from info_kuruma where rec_id = ?</i><i></i>
<p><b>Result:</b> only two fields information is displayed on screen when
the mouse is clicked upon the vector object.
<p><b>2.</b> <i>d.what.v.pg -s sql=process.sql map=census</i><i></i>
<p>process.sql is:<i></i>
<p><i>update census_info set type_good = '1' where rec_id = ? and info_kuruma.type_id
= 35 and info_kuruma.rec_id = rec_id;</i><i></i>
<p><b>Result: </b>this would only change field of the census_info table
for the clicked polygon or line,
<br>if the corresponding type taken from info_kuruma table is equal to
35.
<p><b>Flags:</b> SQL select statements are input from a prepared file.
<p><b>Parameters:</b> SQL statements specifying well formed selection criteria.
Name of an existing vector map.
<h2>
BUGS</h2>
<font size=+0>1. As of now, d.vect.pg and d.what.v.pg both use R_polygon_abs()
for</font>
<br>filling polys, which seems to ignore islands. So you'd rather say to
no fill the
<br>areas.
<p>2. Tcl-Tk modules require input "where" clause restricted to one rule
typed without "whitespaces",
<br>(unlike terminal input where number of subclause is not limited).
<p>This program requires the Postgres database software.
<h2>
SEE ALSO</h2>
<i><a href="g.column.pg.html">g.column.pg</a>, <a href="g.select.pg.html">g.select.pg</a>,
<a href="g.stats.pg.html">g.stats.pg</a>, <a href="g.table.pg.html">g.table.pg</a>,
<a href="d.rast.pg.html">d.rast.pg</a>, <a href="d.site.pg.html">d.site.pg</a>,
<a href="d.vect.pg.html">d.vect.pg</a>, <a href="d.what.r.pg.html">d.what.r.pg</a>,
<a href="d.what.s.pg.html">d.what.s.pg</a>, <a href="r.reclass.pg.html">r.reclass.pg</a>,
<a href="r.rescale.pg.html">r.rescale.pg</a>, <a href="v.reclass.pg.html">v.reclass.pg</a></i>
<h2>
AUTHOR</h2>
Original Informix SQL-tools: James A. Farley, Wang Song, and W. Fredrick
Limp University of Arkansas, CAST
<p>Postgres modifications: Janne Soimasuo, Faculty of Forestry, University
of Joensuu, Finland.
<p>Updated to GRASS 5 by Alex Shevlakov (sixote@yahoo.com)
</body>
</html>
