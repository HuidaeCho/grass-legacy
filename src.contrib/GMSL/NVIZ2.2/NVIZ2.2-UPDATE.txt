NVIZ update history file

---------------------------------------------------------------
Update:
From bcovill@tekmap.ns.ca Wed Nov 22 19:34:33 2000
Date: Wed, 22 Nov 2000 14:47:03 -0400
From: Bob Covill <bcovill@tekmap.ns.ca>
To: Markus Neteler <neteler@geog.uni-hannover.de>
Subject: NVIZ update

Markus,

I have attached 2 tar files with updates for NVIZ.

The first Src.tar is a new versions of init_commands.c and draw.c to be
placed in .../NVIZ2.2/src. These files create two new functions. The
first Nauto_draw returns the status of the auto-draw checkbutton from
tcl. The second function is Ndraw_all which simply calls all three draw
functions (surf, vect, site). I added this one to save on typing.

The second tar file Scripts.tar contains new versions of panel_main.tcl,
panel_vect.tcl, panel_site.tcl, panel_vol.tcl, and widgets.tcl. These
should be placed in .../NVIZ2.2/scripts. A number of changes have been
made to the TCL scripts including:
- auto-draw is bound to all sliders and associated checkboxes.
- auto-draw is bound to XY position puck
- auto-draw is bound to "Look here" and "center" buttons.
- all vector and sites files provided from the command line will be
enabled at startup on all surfaces

I have tried to improve the callbacks from the float (not int) sliders
and associated entry boxes. The callbacks now recalculate the number of
digits (precision) and resolution (increment) for the sliders each time
each time a new value is set. This should help reduce the number of bad
redraws when setting values. A bad redraw is when the window finishes
drawing and reverts to wire. A value now set in an entry box should not
get rounded to another number. I also added a auto parameter that
automatically sets the size the entry box based on the startup value
provided.

You will find that if the redraw is interupted with the scales or entry
boxes the screen will reset after the new redraw. In other words the old
draw will continue after the new draw is finished.

Give the new setup a try and let me know how it works.

Bob Covill                                                                      
                                                                                
Tekmap Consulting                                                               
P.O. Box 2016                                                                   
Fall River, N.S.                                                                
B2T 1K6                                                                         
Canada                                                                          
                                                                                
E-Mail: bcovill@tekmap.ns.ca                                                    
Phone: 902-860-1496                                                             
Fax: 902-860-1498        

---------------------------------------------------------------
# Update to nviz2.2
# 31 oct. 1999  - Pierre de Mouveaux
# p_de_mouveaux@hotmail.com


Notes for update realtive to Grass 5.0 beta4 - october 31 1999.
---------------------------------------------------------------

This update correctes the following problems:
- Screen redrawn in wire mode when mouse passes over 
  vertical sliders.
- Also a potential problem with colors in glwrappers.c 
  (adress of a local variable returned  in color selection)
- Modified intersection function to allow the "look here"
  functionality and the "What's here" functionality.

Normally, once Grass is compiled, go in the src.contrib/GMSL/NVIZ2.2 
directory and type: 
	./configure 
	gmake5 
	gmakelinks5

See the note ROOT-INSTALL for issues regarding installation permissions.

On my Linux box (Mandrake 6.0, based on RedHat 6.0), I had to 
link against libdl.so. This is requested by tcltk8.0. 
These modification are included in my patches.
I don't know if it's requiered for other distributions as well.

For more general infos on compiling Grass, read the file "INSTALL" 
in the Grass sources top directory. (as usual;-)

Pierre.

----------------------------------------------------------------------

9/99 Jacques Bouchard

Problem with tcl/tk execution of "g.gisenv". 
The consequense was a brocken mapset and site 
files selector.


------------------------------------------------------
make scripts use togl functions now when opening windows.
done

can't find lights
done

vectors don't show up 
    - swapping buffers?
    yeah, 

check to see why drawing to BOTH doesn't work, fix tcl or C code

query messes up %x & %y - ?? - FIXED with configure binding
but now query seems to be messed up coming from gsflib - screen
coords are OK.

Fixed wrong type in gsflib - float vs. double.

OK, query fixed - work on "look here" bindings.
DONE

Add single-buffer/double-buffer switching.

why is entering vert. sliders on main panel triggering redraw?
- sporadic - inconsistent :-(

query broken again - just hangs, as with look here.
OK now - fixed LOS tracing to account fo very small/large exag

query - Just need to hook in new color query and category functions:
scripts/panel_query.tcl
src/position.c
DONE- but check color for get_val (needs to check for color lookup, etc)
- also change to use GS_geodistance (add tcl cmd)

Add option to redirect drawing to user-specified file with user-specified 
dimensions:  first create an X Pixmap and then pass this as an
argument to glXCreateGLXPixmap(). Then after rendering, destroy the
association between the X and GLX Pixmaps with glXDestroyGLXPixmap().
Then use glXMakeCurrent.  The contents of a GLX pixmap may be read 
back with glReadPixels or XGetImage.
NOT supported for "direct rendering"
Most of the current Glx stuff is in TOGL 
So would need to create another rendering context (non-direct) 
and render to file.

AMBIENT control affect the "colored light" bug - look at colormode
- CHANGED site objects to use CM_DIFFUSE rather than CM_AD

mask doesn't get removed when told to remove - also check invert mask.

