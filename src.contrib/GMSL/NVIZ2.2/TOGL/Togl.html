<HTML>

<HEAD>
<LINK REV="made" HREF="brianp@ssec.wisc.edu">
<TITLE>Togl</TITLE>
</HEAD>

<BODY>

<CENTER>
<H1>Togl - a Tk OpenGL widget</H1>
<H3>Copyright (C) 1996 Brian Paul and Ben Bederson</H3>
</CENTER>

<BR>
<BR>

<H2>Introduction</H2>

Togl is a Tk widget for OpenGL rendering.  Togl is originally based on
<A HREF="http://www.cs.unm.edu/~bederson/ogl.html">OGLTK</A>,
written by Benjamin Bederson at the University of New Mexico.  Togl adds the
new features:

<UL>
<LI>color-index mode support including color allocation functions
<LI>support for requesting stencil, accumulation, alpha buffers, etc
<LI>multiple OpenGL drawing widgets
<LI>OpenGL extension testing from Tcl
</UL>


Togl allows one to create and manage a special Tk/OpenGL widget with Tcl and
render into it with a C program.  That is, a typical Togl program will have Tcl
code for managing the user interface and a C program for computations and
OpenGL rendering.
<P>

Togl is copyrighted by
<A HREF="http://www.ssec.wisc.edu/~brianp/homepage1.html">Brian Paul</A>
<A HREF="mailto:brianp@ssec.wisc.edu">(brianp@ssec.wisc.edu)</A> and
<A HREF="http://www.cs.unm.edu/~bederson/">Benjamin Bederson</A>
<A HREF="mailto:bederson@cs.unm.edu">(bederson@cs.unm.edu)</A>.
See the LICENSE file for details.
<P>

The Togl WWW page is available from:
<UL>
<LI>Wisconsin at  <A HREF="http://www.ssec.wisc.edu/~brianp/Togl.html">
http://www.ssec.wisc.edu/~brianp/Togl.html</A>
<LI>New Mexico at  <A HREF="http://www.cs.unm.edu/~bederson/Togl.html">
http://www.cs.unm.edu/~bederson/Togl.html</A>
</UL>


<BR>

<H2>Prerequisites</H2>

You should have
<A HREF="http://www.sunlabs.com:80/research/tcl/">Tcl and Tk</A>
installed on your computer, including the Tk source code files.
Togl has been tested with Tcl 7.4/Tk 4.0 and Tcl 7.5/Tk 4.1 at this time.
It is currently configured for Tcl7.5/Tk4.1.
If you want to build it with Tcl7.4/Tk4.0, you must rename the file
"tkInt.h" to "tkInt4.1.h" and rename "tkInt4.0.h" to "tkInt.h".
<P>
You must also have
<A HREF="http://www.sgi.com/Technology/openGL/">OpenGL</A> or
<A HREF="http://www.ssec.wisc.edu/~brianp/Mesa.html">Mesa</A>
(a free alternative to OpenGL) installed on your computer.
<P>
One should be familiar with Tcl, Tk, OpenGL, and C programming to use Togl
effectively.
<P>

<BR>

<H2>Getting Togl</H2>

The current version of Togl is 1.0.  You may download it from either:

<UL>
<LI>Wisconsin at
<A HREF="ftp://iris.ssec.wisc.edu/pub/misc/Togl-1.0.tar.gz">
ftp://iris.ssec.wisc.edu/pub/misc/Togl-1.0.tar.gz</A>
<LI>New Mexico at
<A HREF="ftp://ftp.cs.unm.edu/pub/bederson/Togl-1.0.tar.gz">
ftp://ftp.cs.unm.edu/pub/bederson/Togl-1.0.tar.gz</A>
</UL>

Togl may also be obtained manually with ftp.
<UL>
<LI>Host:  iris.ssec.wisc.edu
<LI>Login:  anonymous
<LI>Password:  your email address
<LI>Directory:  pub/misc
<LI>File:  Togl-1.0.tar.gz
</UL>

The Makefile included with Togl is configured for SGI systems.  It shouldn't
be hard to adapt it for others.
<P>


<BR>

<H2>Using Togl With Your Application</H2>

Since the Togl code is in just three files (togl.c, togl.h and tkInt.h) it's
probably most convenient to just include those files with your application
sources.  The Togl code could be made into a library but that's not necessary.
<P>


<BR>

<H2>C Togl Functions</H2>

These are the Togl commands one may call from a C program.
<P>
<CODE>
#include "togl.h"
</CODE>
<P>

<DL>
<DT><CODE>int Togl_Init( Tcl_Interp *interp )</CODE>
<DD>
	Initializes the Togl module.  This is typically called from the
	Tk_Main() callback function.
</DL>


<DL>
<DT><CODE>void Togl_CreateFunc( Togl_Callback *proc )
<P>
void Togl_DisplayFunc( Togl_Callback *proc )
<P>
void Togl_ReshapeFunc( Togl_Callback *proc )
</CODE>
<DD>
	Register C functions to be called by Tcl/Tk when a widget is realized,
	must be redrawn, or is resized, respectively.
	<P>
	Each C callback must be of the form:
<PRE>
	void callback( struct Togl *togl )
	{
	   ...your code...
	}
</PRE>
</DL>

<DL>
<DT><CODE>void Togl_CreateCommand( char *cmd_name, Togl_CmdProc *cmd_proc )</CODE>
<DD>
	Used to create a new Togl sub-command.  The C function which implements
	the command must be of the form:

	<PRE>
	int callback( struct Togl *togl, int argc, char *argv[] )
	{
	   ...your code...
	   return TCL_OK or TCL_ERROR;
	}
	</PRE>
</DL>

<DL>
<DT><CODE>void Togl_PostRedisplay( struct Togl *togl )</CODE>
<DD>
	Signals that the widget should be redrawn.  When Tk is next idle the
	user's C render callback will be invoked.  This is typically called
	from within a Togl sub-command which was registered with
	Togl_CreateCommand().
</DL>

<DL>
<DT><CODE>void Togl_SwapBuffers( struct Togl *togl )</CODE>
<DD>
    Swaps the front and back color buffers for a double-buffered widget.
    glFlush() is executed if the window is single-buffered.  This is
    typically called in the rendering function which was registered with
    Togl_DisplayFunc().
</DL>

<DL>
<DT><CODE>char *Togl_Ident( struct Togl *togl )</CODE>
<DD>
    Returns a pointer to the identification string associated with an Togl
    widget or NULL if there's no identifier string.
</DL>

<DL>
<DT><CODE>int Togl_Width( struct Togl *togl )</CODE>
<DD>
    Returns the width of the given Togl widget.  Typically called in the
    function registered with Togl_ReshapeFunc().
</DL>

<DL>
<DT><CODE>int Togl_Height( struct Togl *togl )</CODE>
<DD>
    Returns the height of the given Togl widget.  Typically called in the
    function registered with Togl_ReshapeFunc().
</DL>

<DL>
<DT><CODE>Tcl_Interp *Togl_Interp( struct Togl *togl )</CODE>
<DD>
    Returns the Tcl interpreter associated with the given Togl widget.
</DL>

<DL>
<DT><CODE>unsigned long Togl_AllocColor( struct Togl *togl, float red, float green, float blue )</CODE>
<DD>
    Allocate a color from a read-only colormap.  Given a color specified
    by red, green, and blue return a colormap index (aka pixel value)
    whose entry most closely matches the red, green, blue color.  Red,
    green, and blue are values in [0,1].  This function is only used in
    color index mode when the -privatecmap option is false.
</DL>

<DL>
<DT><CODE>void Togl_FreeColor( struct Togl *togl, unsigned long index )</CODE>
<DD>
    Free a color in a read-only colormap.  Index is a value which was
    returned by the Togl_AllocColor() function.  This function is only
    used in color index mode when the -privatecmap option is false.
</DL>

<DL>
<DT><CODE>void Togl_SetColor( struct Togl *togl,
                    int index, float red, float green, float blue )</CODE>
<DD>
    Load the colormap entry specified by index with the given red, green
    and blue values.  Red, green, and blue are values in [0,1].  This
    function is only used in color index mode when the -privatecmap option
    is true.
</DL>
<P>


<BR>

<H2>Tcl Togl commands</H2>

These are the Togl commands one may call from a Tcl program.
<P>

<DL>
<DT><CODE>togl <VAR>pathName</VAR> [options]</CODE>
<DD>
	Creates a new togl widget with name <VAR>pathName</VAR> and
	an optional list of configuration options.  Options include:
<PRE>

Option		Default	Comments
---------------	------- --------------------------------------------------
-width		400	Width of widget in pixels.
-height		400	Height of widget in pixels.

-ident		""	A user identification string ignored by togltk.  This
			can be useful in your C callback functions to determine
			which Togl widget is the caller.

-rgba		true	If true, use RGB(A) mode
			If false, use Color Index mode

-double		false	If false, request a single buffered window
			If true, request double buffered window

-depth		false	If true, request a depth buffer

-accum		false	If true, request an accumulation buffer

-alpha		false	If true and -rgba is true, request an alpha channel

-stencil	false	If true, request a stencil buffer

-privatecmap	false	Only applicable in color index mode.
			If false, use a shared read-only colormap.
			If true, use a private read/write colormap.
</PRE>
</DL>


<DL>
<DT><CODE><VAR>pathName</VAR> configure</CODE>
<DD>
    Returns all configuration records for the named togl widget.
</DL>

<DL>
<DT><CODE><VAR>pathName</VAR> configure <VAR>-option</VAR></CODE>
<DD>
	Returns configuration information for the specifed <VAR>option</VAR>
	which may be one of:
	<DL>
	<DT><CODE>-width</CODE>
	<DD>
		Returns the width configuration of the widget in the form:
		<P>
		<CODE>-width width Width <VAR>W</VAR> <VAR>w</VAR></CODE>
		<P>
		where <VAR>W</VAR> is the default width in pixels
		and <VAR>w</VAR> is the current width in pixels
	</DL>
	<DL>
	<DT><CODE>-height</CODE>
	<DD>
		Returns the height configuration of the widget in the form:
		<P>
		<CODE>-height height Height <VAR>H</VAR> <VAR>h</VAR></CODE>
		<P>
		where <VAR>H</VAR> is the default height in pixels
		and <VAR>h</VAR> is the current height in pixels
	</DL>
	<DL>
	<DT><CODE>-extensions</CODE>
	<DD>
		Returns a list of OpenGL extensions available.  For example:
		<CODE>GL_EXT_polygon_offset GL_EXT_vertex_array</CODE>
	</DL>
</PRE>
</DL>

<DL>
<DT><CODE><VAR>pathName</VAR> configure <VAR>-option</VAR> <VAR>value</VAR></CODE>
<DD>
    Reconfigure an togl widget.  <VAR>option</VAR> may be one of:
	<DL>
	<DT><CODE>-width</CODE>
	<DD>Resize the widget to <VAR>value</VAR> pixels wide
	</DL>
	<DL>
	<DT><CODE>-height</CODE>
	<DD>Resize the widget to <VAR>value</VAR> pixels high
	</DL>
</DL>


<DL>
<DT><CODE><VAR>pathName</VAR> render</CODE>
<DD>
    Causes the render callback function to be called for <VAR>pathName</VAR>.
</DL>
<P>


<BR>

<H2>Demo programs</H2>

There are three demo programs:
<P>
<UL>
<LI>double - compares single vs double buffering with two Togl widgets
<LI>texture - lets you play with texture mapping options
		  (note that Mesa doesn't support some of them)
<LI>index - demo of using color index mode
</UL>
<P>
To compile the demos, edit the Makefile, then type "make".  The Makefile
currently works with IRIX.
<P>
To run a demo just type "double" or "texture" or "index".


<BR>
<BR>
<HR>
Last edited on May 14, 1996 by <A HREF="mailto:brianp@ssec.wisc.edu">
Brian Paul</A>.

</BODY>
