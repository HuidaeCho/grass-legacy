








                            SG3d
                   Supporting Information





_1.  _D_e_s_c_r_i_p_t_i_o_n

_S_G_3_d is meant to be used as a tool for viewing a  data  sur-
face  in  three  dimensions  using GRASS on _S_i_l_i_c_o_n _G_r_a_p_h_i_c_s
_I_R_I_S computers.  Hardware requirements are a Z-buffer and 24
bit  graphics  OR a 24 bit graphic emulator, such as that on
the _I_R_I_S _I_n_d_i_g_o.

_S_G_3_d requires a  raster  file  to  use  as  "elevation"  and
another raster file to use for surface color (or three files
for Red, Green and Blue components of color).  While a  true
elevation  data file used as elevation will produce the most
realistic surfaces, users are encouraged to be  creative  in
selecting other types of data to be represented by the vert-
ical dimension.  Most continuous (as  opposed  to  discrete)
data  types will result in a visualization that makes sense.
While developing the program, we  used  chemical  concentra-
tions as the elevation file with good visual results.

Emphasis during development was on ease and speed of  viewer
positioning  and  flexibility for using a wide range of data
values and sizes.  Since a  wire  grid  can  be  drawn  very
quickly,   such  a  grid is used to provide real-time viewer
positioning capabilities.   Similarly,  a  lighting  "model"
provides  real-time  feedback  as the user adjusts lighting.
Grid and polygon  resolution  control  allows  the  user  to
further refine drawing speed and detail as needed.  Continu-
ous scaling of elevation values from 1.0ee-7 to 1.0ee+7 pro-
vides the ability to use various data types for the vertical
dimension.

In this release,  we  upgraded  _S_G_3_d  to  allow  interactive
lighting  specifications, vector draping, data querying (see
_W_h_a_t'_s _h_e_r_e?), easier viewer positioning, an option to  save
current  settings in a GRASS database (_3_d._v_i_e_w) file, anima-
tion capabilities, scale objects,  labeling,  an  option  to
display  lat-long  data wrapped around a sphere, the ability
to save images in _I_R_I_S rgb format  files,  and  a  few  less
dramatic  changes  such  as  background color options and an
_a_n_i_m_a_t_e _d_i_s_p_l_a_y _t_y_p_e option that allows the user to  view  a
fully rendered image while adjusting viewer positioning (see
_O_p_t_i_o_n_s...).





                       April 9, 1993





                           - 2 -


_2.  _G_e_n_e_r_a_l _N_o_t_e_s

Environment variables _S_G_3_D__W_I_D_T_H and _S_G_3_D__H_E_I_G_H_T  may be set
to  define  the width and height (in pixels) of the graphics
window at startup.  All _S_G_3_d windows may  be  resized  using
the  window  manager's normal controls at any time.  Text in
the control panels is not scalable,  however,  so  the  text
will disappear if the panel is sized too small.

Before starting the program, check your current GRASS region
resolution  and  dimensions.   The   current resolution will
determine the _b_e_s_t  resolution  available  in  _S_G_3_d.   Large
dimensions  such  as  1000 x 1000 rows and columns may cause
the program to run slower.  Try starting out with a  smaller
(i.e.  300 x 300 or less) region until you get more comfort-
able and experienced using the program.

After starting the program, place your GRASS window where it
can  be  seen and typed into, as it is used to issue prompts
and warnings and to input filenames.

Any sliders and dials used in the control panels have a FINE
ADJUSTMENT:  Hold  down  the Ctrl key while manipulating the
dial or slider for fine control.


_2._1.  _C_o_m_p_i_l_a_t_i_o_n

Before compiling _S_G_3_d, compile the  panel  library  and  the
image       library       by       typing       _m_a_k_e      in
src.contrib/CERL/SGI/panel/9.6                           and
src.contrib/CERL/SGI/libimage.

When compiling under IRIX 3.x, comment out the line  #_d_e_f_i_n_e
_F_O_U_R__O_H in the externs.h file.  If compiling under IRIX 4.0,
leave the line in (default).


_2._2.  _S_t_a_r_t_u_p

The syntax for starting the program is:

     SG3d    [-w]    [-z]    _e_l_e_v_f_i_l_e     color=_c_o_l_o_r_f_i_l_e(_s)
     [vect=_v_e_c_t_f_i_l_e]  [script=_s_c_r_i_p_t_f_i_l_e]  [sites=_s_i_t_e_s_f_i_l_e]
     [3dview=_3_d_v_i_e_w_f_i_l_e]

     -w                enables writing to a script file

     -z                Uses site catagory value as  Z  value
                       (height) when displaying sites

     elevfile          name of a GRASS raster file to use as
                       elevation




                       April 9, 1993





                           - 3 -


     colorfile         name of a GRASS raster  file  to  use
                       for   surface  color.   Three  raster
                       files may be used for red, green, and
                       blue components of color instead of a
                       single file:

                       co=_r_e_d__f_i_l_e_n_a_m_e,_g_r_e_e_n__f_i_l_e_n_a_m_e,_b_l_u_e__f_i_l_e_n_a_m_e

     vectfile          (optional)  name  of  a  GRASS vector
                       file.

     scriptfile        (optional)  automatically  run   this
                       script  file at startup.  Script file
                       must be in user's current directory.

     sitesfile         (optional) name of a GRASS sites list
                       file.

     3dviewfile        (optional) name of a GRASS 3D viewing
                       parameters file.

If the user types _S_G_3_d on the command line without any argu-
ments, the program will prompt the user for the arguments.


_3.  _P_a_n_e_l_s

_S_G_3_d starts up with one graphics window and three panel win-
dows  visible.  There are four additional panel windows that
pop up when their appropriate toggle button  is  clicked  in
the _M_e_n_u_s panel.  To hide the pop up windows, click again on
their toggle button in the _M_e_n_u_s panel - using the  _Q_u_i_t  or
_C_l_o_s_e  options from the window manager's menu bar will cause
the program to exit.

_3._1.  _M_o_v_e_m_e_n_t _P_a_n_e_l

Use the Movement panel to position the viewer over the  data
and  to  indicate  viewing  direction  and  perspective.  As
options in this panel are changed, a wire grid of  the  sur-
face  is redrawn (_f_a_s_t _d_i_s_p_l_a_y _m_o_d_e) to immediately show the
results of the changes.


     XY position: The _X_Y _p_o_s_i_t_i_o_n box contains a star-shaped
     puck  which  represents  the viewer.  Click on the puck
     and drag to move the viewer around.  The  data  may  be
     thought  of  as  always lying in the center of the box,
     with north at the  top.   The  puck  also  has  a  dial
     attached  to it that always points in the direction the
     viewer is looking.

     Height:  Adjusts the viewer's height.




                       April 9, 1993





                           - 4 -


     look here:  Allows the user to click on a spot  on  the
     data  surface  which will remain centered as the viewer
     position changes.  Clicking on _h_e_r_e results in a prompt
     in the GRASS window:

          LEFT MOUSE BUTTON to mark new center of view

          ESCAPE key to cancel

     After clicking  on  the  surface,  the  new  center  is
     automatically set and the surface is redrawn.

     look center:  Automatically fixes new center of view at
     the  _c_e_n_t_e_r  _o_f  _t_h_e _g_r_a_p_h_i_c_s _w_i_n_d_o_w (not the center of
     the data).  If there is not  a  surface  point  at  the
     center  of the window, _l_o_o_k _c_e_n_t_e_r chooses the centroid
     of the visible surface for the new center.  Requires no
     mouse   input,  so  may  be  used  in  scripting.  (see
     _s_c_r_i_p_t...)

     look cancel:  Clicking on _c_a_n_c_e_l  allows  the  user  to
     move  over  the  surface  with  no fixed center of view
     (default).

     Z exag:  Exagerates the vertical dimension of the  sur-
     face.   An  exageration  of  1.0 represents the surface
     with x, y, and z units all being equal.   For  example,
     if the easting and northing units are in meters and the
     elevation in feet, a Z exageration of .305 would be the
     _t_r_u_e  exageration for the surface.  For most geographi-
     cal applications, greater than  true  exageration  pro-
     duces more visually pleasing images.

     Z Scale:  May be thought of as a course adjustment  for
     Z exageration.  Originally included to handle data sets
     with vastly different units or scales used  for  eleva-
     tion, the program now does a decent job of guessing the
     desired _Z _s_c_a_l_e at startup.

     Perspective:  Adjusts the viewer's angle of view.

     Ortho:  Uses an orthographic projection instead of per-
     spective.   This  type  of  projection tends to give an
     image less feeling of depth, but it can be useful  when
     perspective  causes  too  much distortion.  If the _P_e_r_-
     _s_p_e_c_t_i_v_e slider is activated while _O_r_t_h_o is toggled on,
     _O_r_t_h_o is automatically cancelled.

     View Dir., Twist, and View Incline: adjust the  viewing
     direction.   Adjusting  the  _V_i_e_w  _D_i_r. or _V_i_e_w _I_n_c_l_i_n_e
     dials when the _l_o_o_k option (fixed center of view) is on
     will  result  in the _l_o_o_k option being cancelled, as if
     you clicked on _l_o_o_k _c_a_n_c_e_l first.




                       April 9, 1993





                           - 5 -


     Reset:  Sets all settings to their startup values.


_3._2.  _C_o_n_t_r_o_l _P_a_n_e_l

Use Control panel options to select the type of  surface  to
be drawn.  Most of these options are toggle buttons that are
enabled by clicking once and  disabled  by  clicking  again.
After  options  are  set,  click on _D_r_a_w to see the results.
Clicking on _C_a_n_c_e_l while the surface or  vectors  are  being
drawn  cancels the drawing.  Clicking on a button other than
_C_a_n_c_e_l while drawing will produce unexpected results.


     Grid Resolution:  sets number  of  cells  between  grid
     lines  when  drawing  wire  grids (in both _f_a_s_t _d_i_s_p_l_a_y
     _m_o_d_e and _D_r_a_w mode).  A larger grid  resolution  number
     produces a more sparce grid.

     Poly Resolution:  sets number of cells to  be  used  as
     dimensions of each polygon drawn when drawing polygons.
     Each drawn polygon actually represents (Poly Res x Poly
     Res) cells.

     Polygon:  draw  surface  using  filled  polygons  (most
     realistic).

     Wire/Poly:  draw surface as  polygons,  but  with  wire
     mesh draped over it.

     Wire:  draw surface with a  wire  mesh.   This  differs
     from the mesh drawn in _f_a_s_t _d_i_s_p_l_a_y _m_o_d_e in that hidden
     lines are not drawn.

     Col Wire:  same as Wire, but  use  colors  from  raster
     file  for  wires.   Also  affects  grid  drawn  in _f_a_s_t
     _d_i_s_p_l_a_y _m_o_d_e - useful when trying to  position  over  a
     specific  data  area more identifiable by color than by
     elevation.

     Gouraud:  smooth shade surface to blend individual cell
     colors together.

     Fringe:  draw fringe around outside edges of surface.

     Lights:  use lighting to show surface relief.

     Surface Only:  (when using lights) show surface without
     color  from  raster  file  (renders  using  color  from
     lights).

     What's here?  Like the GRASS program  _d._w_h_a_t._r_a_s_t,  you
     are prompted to use the mouse to mark spots on the sur-
     face that you would like more information about.  After



                       April 9, 1993





                           - 6 -


     clicking  on the surface, data prints to the GRASS win-
     dow.  First, the geographical coordinates are  printed.
     Then,  elevation  is  bilinearly  interpolated from the
     current polygon resolution and this is printed (setting
     the  resolution  to  1  will  produce the most accurate
     elevation).  Then one line for each data file  used  to
     create  the  surface  (two  or four files, depending on
     number of files used for color) is  printed  displaying
     the file name, mapset, value (not interpolated, only to
     the nearest cell), and category.  Each time you  select
     a point, a small x is drawn on the surface at the point
     selected.  To stop selecting points you must click  the
     _r_i_g_h_t _m_o_u_s_e button.

     Triangulate:  Under IRIX  3.x,  using  the  _t_r_i_a_n_g_u_l_a_t_e
     feature  will  slightly  improve  drawing speed.  Under
     IRIX 4.0, there is no performance gain.  When  _t_r_i_a_n_g_u_-
     _l_a_t_e  is selected, polygons are always broken into tri-
     angles along the same diagonal.   Without  _t_r_i_a_n_g_u_l_a_t_e,
     polygons  are  still  drawn  as triangles when all four
     vertices of the polygon do not lie in the  same  plane,
     but the diagonal used is determined by the surface nor-
     mals at the vertices, resulting in a more natural look-
     ing surface.  This option may be deleted in future ver-
     sions.

     No Zeros:  do not draw  surface  where  elevation  data
     values are zero.

     Draw:  draw the currently defined surface.

     Cancel:  cancel any drawing that is currently underway.

     Vect:  draw the currently defined vector file.   If  no
     vector  file  has  been  specified, this button is dis-
     abled.  (also see Vect...)

     Sites:  draw the currently defined sites file.   If  no
     sites file has been specified, this button is disabled.
     When drawn, sites appear as small (X)s draped over  the
     surface.   Using  the -_z option at startup causes sites
     to be drawn using the site category value as  elevation
     instead of draping the sites on the surface.  _S_G_3_d uses
     the current _P_o_l_y _R_e_s_o_l_u_t_i_o_n to determine  the  size  of
     the (X)s; for bigger (X)s, increase the _P_o_l_y _R_e_s_o_l_u_t_i_o_n
     after drawing the surface but before drawing the sites.
     (also see Options...)

     Quit:  exit the program.

     Img Dump:  Prompts user in the GRASS window for a  name
     to  be  used  for  an  IRIS rgb format image file, then
     writes the contents of  the  graphics  window  to  that
     file.   This  is basically a screen dump of the portion



                       April 9, 1993





                           - 7 -


     of the screen defined by the boundaries of the graphics
     window,  so  if any panel windows or windows from other
     applications are partially covering the  graphics  win-
     dow,  they  will appear in the saved image as well.  To
     view the image files, you  can  use  the  SGI  programs
     _i_p_a_s_t_e and _i_m_g_v_i_e_w.  SGI also provides many programs to
     convert  rgb  image  files  to  other  formats:  _t_o_p_p_m,
     _t_o_t_a_r_g_a, _t_o_s_u_n, _t_o_p_s, etc.


_3._3.  _M_e_n_u_s

The Menus panel contains buttons that toggle six  additional
pop-up  panels.  To make a hidden window visible, click once
on the desired button.  To hide the window, click  again  on
the button.


_3._4.  _L_i_g_h_t_s...

The Lights panel contains adjustments and options to control
the  position,  color  and  brightness of the lights and the
reflectivity (shininess) of the surface.  There are actually
two  lights:  one dim white light remains directly above the
surface at all times and serves  as  fill  light.  The  main
light,  which the user controls, is a "local" light which is
positioned much like the view  position.   When  lights  are
being  adjusted, a sphere appears on the surface and is con-
tinuously redrawn to show the effects of  lighting  changes.
The lighting adjustments do not affect the appearance of the
surface until it is redrawn.  Neither light is  directional;
light is emitted equally in all directions.


     Follow Viewpoint:  By default, the  light  position  is
     near  the viewing position and the light moves with the
     viewer.  Toggling this option off will keep  the  light
     fixed  in  one position as the viewer position changes.
     Adjusting the  _H_e_i_g_h_t  or  _X_Y  _p_o_s_i_t_i_o_n  of  the  light
     automatically toggles _F_o_l_l_o_w _V_i_e_w_p_o_i_n_t off.

     Show  Model:   The  sphere  showing  current   lighting
     effects can be removed by toggling this option off.

     Height:  Adjusts light height.

     XY position:   Adjusts  light  position  over  surface;
     north is always at the top.

     Light Brightness:  Adjusts the brightness of the light.

     R, G, B:  Adjusts the Red, Green and Blue components of
     the main light.




                       April 9, 1993





                           - 8 -


     Ambient Light:  Adjusts the  ambient  light  associated
     with  the  main  light  and  the brightness of the fill
     light.

     Surface Reflectivity:  Adjusts  the  shininess  of  the
     surface.


_3._5.  _V_e_c_t...

The Vectors panel contains adjustments for displaying vector
files  on the surface.  After selecting options in this win-
dow, select _V_e_c_t in the Control panel  to  draw  the  vector
file.


     New Vect:  Prompts user in the  GRASS  window  for  the
     name  of  a  new  vector file.  Only one vector file is
     "current" at any given time, but there is no  limit  to
     the number of files that may be loaded and drawn on the
     same surface one at a time.

     Drape, Flat, Vect Z:  If _D_r_a_p_e is  selected  (default),
     lines  are  draped over the surface and _V_e_c_t _Z controls
     the distance above the surface that  the  vector  lines
     "float".   e.g.,  if  vector  lines appear to be buried
     under the surface in spots, try increasing the _V_e_c_t  _Z.
     If  _F_l_a_t is selected, lines are drawn in a single plane
     and _V_e_c_t _Z controls the vertical position of the plane.
     Adjusting  _V_e_c_t _Z in _f_l_a_t mode causes an outline of the
     plane to be drawn to help the user position  the  level
     of the plane.

     Line Width:  Width (in pixels) to draw vector lines.

     color, Darker:  Select color used to draw vector lines.
     Toggling  _D_a_r_k_e_r will use the selected color at a lower
     intensity.


_3._6.  _O_p_t_i_o_n_s...


     Save Current 3d View:  Prompts user in the GRASS window
     for  the  name  of  a file in which to save the current
     position and control settings.

     Load 3d View:  Prompts user in the GRASS window for the
     name  of  a  _3_d._v_i_e_w file in which position and control
     settings have been saved, loads  the  file  and  resets
     dials  and  buttons.   If loading a view that was saved
     when viewing a different region,  a warning is  printed
     describing  the percentage of the region from which the
     view was  saved  that  is  overlapped  by  the  current



                       April 9, 1993





                           - 9 -


     region.   In  such  cases,  loaded settings may produce
     unexpected results.  _3_d._v_i_e_w files are GRASS 4.1  data-
     base  files,  and  the  region  may  be  changed  using
     _g._r_e_g_i_o_n _3_d_v_i_e_w=_v_i_e_w_f_i_l_e_n_a_m_e (_S_G_3_d would then  need  to
     be  restarted).  The _3_d._v_i_e_w files used by this program
     are compatible with _3_d._v_i_e_w files  used  by  the  GRASS
     program  _d._3_d,  but  minor  differences in the view may
     occur due to the different ways the two programs inter-
     pret parameters.

     New Sites File:  Prompts user in GRASS window for a new
     sites file.

     sites color:  Select color for sites.

     New Cell (color) File:  Prompts user  in  GRASS  window
     for  one  or  three new raster files to use for surface
     color.  The program allows the user  to  use  a  single
     raster  file for surface color or three separate raster
     files for the red, green, and  blue  color  components.
     The  first  prompt will ask _C_h_o_o_s_e _s_i_n_g_l_e _c_e_l_l _f_i_l_e  _O_R
     _R_E_D _f_i_l_e:.  If you want to use a single raster file for
     surface  color,  enter  that filename and press RETURN,
     then press RETURN again at  the  second  prompt  _C_h_o_o_s_e
     _G_R_E_E_N _f_i_l_e _o_r <_R_E_T_U_R_N> _f_o_r _s_i_n_g_l_e _f_i_l_e.

     New Elevation File:  Prompts user in GRASS window for a
     new  raster  file  to use for elevation.  After loading
     the file, the new surface is  immediately  drawn  using
     the  current  drawing  mode, without erasing the screen
     first.  This is not a bug.  Due to memory  usage,  _S_G_3_d
     does not allow more than one surface to be in memory at
     one time, but drawing  the  new  surface  in  the  same
     visual  space as the previous surface enables a careful
     user to view multiple surfaces simultaneously.  If  you
     only  wish to view the new elevation file, you may can-
     cel the drawing of the new surface by clicking  on  the
     _C_a_n_c_e_l  button, just below the _D_r_a_w button.  Any subse-
     quent drawing will only show the new surface.   If  the
     range  of  data  in the new elevation file is different
     than the range of the previous elevation file,  it  may
     be  necessary  to  select _R_e_s_e_t from the Movement panel
     for the surface to  be  rescaled  for  easier  viewing.
     When displaying multiple surfaces, if you want to use a
     different raster file for color you must load  the  new
     color file first, then the new elevation file. There is
     no  limit  to  the  number  of  surfaces  that  can  be
     displayed  in succession, but once _D_r_a_w is selected and
     the surfaces are erased, only  the  latest  surface  is
     available.

     animate display type:  Toggling this button will  cause
     the  current display type (_P_o_l_y_g_o_n, _W_i_r_e/_P_o_l_y, or _W_i_r_e)
     to be drawn instead of the _f_a_s_t _d_i_s_p_l_a_y _m_o_d_e wire  grid



                       April 9, 1993





                           - 10 -


     when  the  user  is  adjusting Movement panel controls.
     These drawing modes take considerably more time and the
     display  is double buffered, so drawing progress is not
     shown.  When _a_n_i_m_a_t_e _d_i_s_p_l_a_y _t_y_p_e is  toggled  on,  the
     program   checks  currently  specified  resolution  and
     issues a warning if drawing time  will  be  very  slow.
     This  button  was hidden on the Options pop-up panel to
     prevent its accidental use because it can be time  con-
     suming  and  frustrating if you have the resolution set
     too fine and try to animate a fully rendered surface of
     say  a quarter of a million polygons (500 x 500).  How-
     ever, including this option allows those with very fast
     graphics  systems  to take advantage of their hardware.
     One further note:  double  buffering  causes  available
     color  bitplanes  to  be  halved,  so the image quality
     while animating will be  degraded.   When  you  release
     your mouse button after adjusting viewing position, the
     image is redrawn in single buffer  mode  utilizing  all
     color  bitplanes.  This effect is especially noticeable
     on systems with only eight bitplanes.

     background color:  select color  for  background.   The
     program chooses a contrasting color to use for the grid
     in _f_a_s_t _d_i_s_p_l_a_y _m_o_d_e.

     map lat-long to globe:  This button only  appears  when
     the  current  GRASS  location uses a latitude-longitude
     projection rather than UTM or x-y.  Toggling this  but-
     ton  ON  causes  the  lat-long  data  to be mapped to a
     sphere. Drawing  in  this  mode  is  noticeably  slower
     because  each  point has to be transformed to spherical
     coordinates.  This is  a  relatively  new  feature  and
     still  has  some  bugs. The following functions of SG3d
     are not available when  the  surface  is  mapped  to  a
     sphere:   _l_o_o_k  _h_e_r_e, _W_h_a_t'_s _h_e_r_e?, _F_r_i_n_g_e, and none of
     the functions on the Scale panel.  In addition,  viewer
     positioning  functions  are  not  as  intuitive in this
     mode.  By default, the viewer looks toward  the  center
     of  the sphere, but you may use _l_o_o_k _c_a_n_c_e_l followed by
     _V_i_e_w _I_n_c_l_i_n_e and _V_i_e_w _D_i_r. to let you look  in  a  dif-
     ferent direction.  The _l_o_o_k _c_e_n_t_e_r button always resets
     the center of view to the center  of  the  sphere  when
     using this mode.

     Scale... & Label...  These  two  buttons  toggle  addi-
     tional pop up panels.


_3._7.  _S_c_a_l_e...

The Scale panel contains adjustments for displaying a  scale
object  anywhere  on  the  surface  or ruler marks along the
edges of the surface.  Scale objects available are wire out-
lines  or  solid representations of a square plane or a cube



                       April 9, 1993





                           - 11 -


showing z-exaggeration effects and an arrow pointing  north.
This  panel  is  disabled  when  using _m_a_p _l_a_t-_l_o_n_g _t_o _g_l_o_b_e
mode.

     place scale object: Prompts user in the GRASS window to
     use  the  left  mouse  button  to mark center of scale.
     Click with the left button in the  graphics  window  at
     the  point  where you want to place the object.  If the
     point is on the surface, the object will be  placed  so
     it  is  resting on top of the surface.  If the point is
     off the surface, the object will be  placed  where  the
     position  clicked intersects with the plane of constant
     z value at the minimum  z  value  of  the  surface  (or
     minimum  non-zero,  if  _N_o  _Z_e_r_o_s is toggled ON).  This
     method of determining the elevation of the scale object
     may be overriden (see _e_l_e_v below).

     solid, wire, north arrow, cube, plane:  Combinations of
     these  toggle  buttons  determine the appearance of the
     scale object.

     draw ruler:  Draws ruler marks along the selected sides
     of  the  data  at  intervals determined by the value of
     _s_i_z_e.  For a graded ruler: draw ruler once, reduce _s_i_z_e
     by  an  even  multiple,  draw ruler again, reduce _s_i_z_e,
     etc.  Note: The width of the ruler lines may be changed
     by adjusting _L_i_n_e _W_i_d_t_h on the Vectors panel.

     NW, SW, NE, SE:  Determines which sides of the data the
     ruler will be drawn on and the direction from which the
     scale marks begin.  For example, if _S_W is  toggled  on,
     ruler  marks will appear on the south and west sides of
     the surface, proceeding from the southwest  corner.  If
     both  _S_W and _N_E are toggled on, ruler marks will appear
     on all four sides of the surface, proceeding  from  the
     southwest corner and northeast corner.

     elev, auto:   When _a_u_t_o is toggled ON, the type-in  box
     displays  the  elevation,  in  units of the raster file
     used for elevation,  at  which  the  scale  object  was
     placed.   You  may  type  in  a  different elevation by
     clicking in the type-in box, entering the elevation  at
     which  you  want  the  object  displayed, then pressing
     return.  This automatically toggles _a_u_t_o  off.   Subse-
     quent  placement of scale objects will cause the object
     to be drawn resting on a plane of constant z  value  at
     the new elevation (also see _p_l_a_c_e _s_c_a_l_e _o_b_j_e_c_t).

     size:  This type-in box determines the  size  of  scale
     objects  and  the  distance  between  tick marks on the
     rulers, in units of the data (meters for  UTM,  degrees
     for  lat-long).  By default, _S_G_3_d chooses some power of
     ten times 25, 50, or 100 which results in  a  desirable
     scale size.



                       April 9, 1993





                           - 12 -


     color:  Select color for scale object and ruler lines.

_3._8.  _L_a_b_e_l...

The Label panel contains adjustments for displaying  a  text
string in the graphics window.

     place label, undo:  The _p_l_a_c_e _l_a_b_e_l button prompts user
     in  GRASS  window  to use the left mouse button to mark
     first letter of label. Click with the  left  button  in
     the  graphics  window  at  the  point where you want to
     place the label. The bottom left corner  of  the  first
     letter of the label will begin where you click.  If you
     are not satisfied with the positioning or  size,  press
     the _u_n_d_o button and the label will be removed.

     text:  Enter the text you want to place in the graphics
     window in this type-in box.

     size:  Enter the point size of the  text  you  want  to
     display.   _S_G_3_d chooses the closest point size equal to
     or less than the size requested that  is  available  in
     the font requested.   One inch is equal to 72 pts.

     color:  Select color for label.

     Times-Roman, Helvetica, Italic, Bold:  Combinations  of
     these  toggle buttons determine which of eight possible
     font styles is used.

_3._9.  _V_e_c_t_P_a_t_h...

The Path panel contains controls for using  a  GRASS  vector
file  to  determine a path for viewer movement over the sur-
face.  By default, _S_G_3_d limits the  number  of  points  used
from a vector file to the first 1000 points.  This number is
defined in path.c as MAX_PATHSTEPS, so  may  be  changed  if
needed and the program recompiled.  The user may request any
number (within reason) of total frames once the vector  file
points  are  loaded;  path  points between vector points are
interpolated using a cardinal cubic spline or simple  linear
interpolation,  as  requested  by the user.  Closed, looping
paths are supported by both  methods  of  interpolation.   A
path  is considered to be a loop if the beginning and ending
points in the vector file are  identical.   (Also  see  _K_e_y_-
_f_r_a_m_e... and  Hints - Animation.)

     new vect path:  Prompts user in GRASS  window  for  the
     name  of  a  vector file from which to generate a path.
     When the path is created, the  number  of  points  used
     from  the  vector file is displayed in the _t_o_t_a_l _f_r_a_m_e_s
     box (see _t_o_t_a_l _f_r_a_m_e_s).

     Follow Terrain, height, smoothing:  With _F_o_l_l_o_w _T_e_r_r_a_i_n



                       April 9, 1993





                           - 13 -


     toggled  on,  the  path  uses  the  value in the _h_e_i_g_h_t
     type-in box to determine the z  value  of  the  viewing
     position (z value = _h_e_i_g_h_t + elevation of terrain under
     path position).  If _s_m_o_o_t_h_i_n_g is toggled on, the _h_e_i_g_h_t
     value  is  used to determine the z value of the viewing
     position ONLY at the points along the  path  that  were
     obtained  from  the  vector file; any interpolated path
     points have their z values interpolated as well.

     Constant Elevation, elevation:  With _C_o_n_s_t_a_n_t _E_l_e_v_a_t_i_o_n
     toggled  on,  the  path uses the value in the _e_l_e_v_a_t_i_o_n
     type-in box as the z value of the viewing position.  By
     default,  the maximum value in the raster file used for
     elevation is placed in the type-in box.

     Look Forward, Tilt:  With _L_o_o_k _F_o_r_w_a_r_d toggled on,  the
     viewing  direction  along the path is automatically set
     to look toward a forward point  along  the  path.   The
     value  in the type-in box below _L_o_o_k _F_o_r_w_a_r_d is used to
     determine how many points ahead to  look.   A  negative
     value  in the type-in box may be used to look backward.
     Use the _T_i_l_t dial to look more toward the ground or the
     sky  when  looking forward.  Moving the dial in a coun-
     terclockwise direction will set  the  looking  position
     more  toward  the ground.  This effect is not displayed
     unless the path is running.  If _L_o_o_k _F_o_r_w_a_r_d is toggled
     off,  the  direction  of view is determined by the set-
     tings in the Movement panel.

     step, run, Frames:  The _F_r_a_m_e_s slider may be thought of
     as  a time line representing the path.  When a path has
     been loaded, clicking on _r_u_n will move the viewer  down
     the path, redrawing the wire frame surface at each path
     step.  The user may cancel a running animation  at  any
     time  by  clicking  on the _C_a_n_c_e_l button on the Control
     panel.  The _F_r_a_m_e_s slider shows the progression of  the
     animation.   Use  the  _s_t_e_p  arrows  to step forward or
     backward one frame at a time, or move the _F_r_a_m_e_s slider
     to  the  desired point in the animation.  The number to
     the right of the _s_t_e_p arrows is the frame number  being
     displayed.

     total frames:  The value in this  type-in  box  is  the
     total number of frames in the animation.  When a vector
     file is first loaded, the number of points in the  file
     (up  to 1000) will be the number of frames.  Typically,
     to produce smooth animations, the  user  should  use  a
     vector  file  with  10  -  50 points, then change total
     frames to 100 or more, depending on the length  of  the
     animation  desired.  Requesting  an excessive number of
     frames (i.e., 500,000) may cause memory problems.

     show path:  Toggling this button ON will cause the path
     to  be drawn each time a new frame is drawn.  The color



                       April 9, 1993





                           - 14 -


     and thickness of the path line  may  be  changed  using
     adjustments  on  the Vectors pop up panel.  Showing the
     path can be useful while previewing and  adjusting  the
     path.

     show vect:  Toggling this button ON will cause  vectors
     to be drawn each time a new frame is drawn, if a vector
     file has been loaded. (see also _V_e_c_t...).

     spline, linear, tension:   These  controls  affect  the
     interpolation  method  used  when  the  value  of _t_o_t_a_l
     _f_r_a_m_e_s is different than the number of  points  in  the
     original vector file used as the path.  The points from
     the vector file are always used as control points  from
     which  the positioning information for the total number
     of requested frames is derived.  If  _s_p_l_i_n_e  interpola-
     tion  is  selected,  the user may adjust spline tension
     (how much slack there is in the path) using the _t_e_n_s_i_o_n
     slider.   Toggling _s_h_o_w _p_a_t_h ON prior to adjusting ten-
     sion allows the user to judge how much tension  to  use
     for a smoother path.

     send  path  to  keyframes:   This  button   reads   the
     currently defined vector path and copies it to the Key-
     frame panel. Keyframes already defined in the  Keyframe
     panel are overwritten.  (See Keyframe....)

     run and save images:  Prompts user in the GRASS  window
     for  a prefix to be used to name a series of rgb format
     image files, one for each frame.  The animation is then
     run  from  the  beginning,  with each frame being fully
     rendered using the current display type and  resolution
     (see  Control  panel).  If _s_h_o_w _v_e_c_t is toggled ON, the
     vector file is also drawn, then the finished  frame  is
     written to an rgb file. If files already exist with the
     same name, they are overwritten.  You  may  cancel  _r_u_n
     _a_n_d  _s_a_v_e  _i_m_a_g_e_s  at any time by selecting _C_a_n_c_e_l from
     the Control panel (it may take several clicks  on  _C_a_n_-
     _c_e_l).   This  entire  process may take several hours of
     computer time for a 100 frame animation  of  a  complex
     surface,  but requires no further intervention from the
     user. The finished  rendered  animation  files  can  be
     played  back  using SGI's _m_o_v_i_e program if it is a very
     short animation or you can capture the images on video.
     (Also  see  _I_m_g  _D_u_m_p  on the Control panel and Hints -
     Animation.)


_3._1_0.  _K_e_y_f_r_a_m_e...

The Keyframe panel contains controls  for  producing  custom
animations  by  moving  the  viewer around the data surface.
With keyframe animation, the user precisely  defines  a  few
positions  along  a movement path (keyframes), specifies the



                       April 9, 1993





                           - 15 -


total number of frames desired in the  animation,  and  then
lets  the  computer  generate  the viewer position along the
path for all the in-between frames, according to a  selected
interpolation  method.   (Also  see _V_e_c_t_P_a_t_h... and  Hints -
Animation.)

     step, run, Key Frames:  The _K_e_y _F_r_a_m_e_s  slider  may  be
     thought  of  as a time line representing the animation.
     When three or more keyframes have been defined (two  or
     more  if  using  linear interpolation), clicking on _r_u_n
     will move the viewer along the path beginning from  the
     current position of the _K_e_y _F_r_a_m_e slider bar, redrawing
     the wire frame surface at each path step, and advancing
     the  slider  bar.  The user may cancel a running anima-
     tion at any time by clicking on the  _C_a_n_c_e_l  button  on
     the Control panel.  The number to the right of the _s_t_e_p
     arrows is the frame number being  displayed.   The  _K_e_y
     _F_r_a_m_e_s  slider  has small black tick marks representing
     each frame of the  animation  and  larger  blue  arrows
     above  the slider that represent keyframes (none of the
     latter exist until keyframes are created -  see  _a_d_d  _a
     _k_e_y_f_r_a_m_e).  The keyframe arrows can be grabbed with the
     mouse and moved along the slider. To delete a keyframe,
     grab  the arrow representing the keyframe to be deleted
     and slide it completely off the slider  to  the  right-
     hand side, then release the mouse button.  Use the _s_t_e_p
     arrows to step forward or backward one frame at a time,
     or  move the _K_e_y _F_r_a_m_e_s slider bar to the desired point
     in the animation. If the user clicks in the slider at a
     point to the left of the first keyframe or to the right
     of the last keyframe, or if there have not been  enough
     keyframes  defined  to  specify  a path, current viewer
     positioning settings are not changed.

     total frames:  This is a  type-in  box  containing  the
     number  of total frames requested.  To change, click in
     the box, edit the value using the keyboard,  and  press
     return.   The  path  will be updated and the _K_e_y _F_r_a_m_e_s
     slider will be redrawn showing  the  number  of  frames
     requested as black tick marks along the slider.

     add a keyframe:  Adds a keyframe at the  point  in  the
     animation  where the keyframe slider bar is positioned.
     If there is already a keyframe at that point, the  user
     will  be asked in the GRASS window whether the old key-
     frame should be replaced.

     clear all keyframes:  Deletes all  keyframes  currently
     defined.

     show path:  When toggled ON,  this  button  causes  the
     currently  defined path to be drawn as a line with (X)s
     marking keyframes.  It also changes the display to show
     othographic  views  of the path from the top, south and



                       April 9, 1993





                           - 16 -


     east in three seperate viewports along  the  bottom  of
     the  graphics window.  The viewer's current position is
     shown in these small viewports by a red dot.  The color
     and  width  of  the  line  used to show the path can be
     changed using adjustments in the Vect... panel.

     show vect:  Toggling this button ON will cause  vectors
     to be drawn each time a new frame is drawn, if a vector
     file has been loaded. (see also _V_e_c_t...).

     linear, spline, tension:   These  controls  affect  the
     interpolation  method  used.   The keyframes are always
     used as  control  points  from  which  the  positioning
     information for the total number of requested frames is
     derived.  If _s_p_l_i_n_e interpolation is ON, the  user  may
     adjust  spline  tension (how much slack there is in the
     path) using the _t_e_n_s_i_o_n slider.  Toggling _s_h_o_w _p_a_t_h  ON
     prior to adjusting tension allows the user to judge how
     much tension to use for a smoother path.

     run and save images:  See _r_u_n _a_n_d _s_a_v_e  _i_m_a_g_e_s  on  the
     VectPath...  panel.   This  button does the same thing,
     but for the keyframe-defined path.


_3._1_1.  _S_c_r_i_p_t...

The scripting panel contains controls for  reading  and  (if
enabled)  writing  script files that contain commands to the
panel system.  To  enable  writing  use  the  -w  option  at
startup or set the environment variable _W_R_I_T_E.  Script files
are not GRASS database files, and are read from and  written
to the current directory.


     script file:  This is a type-in  box  that  contains  a
     default  filename,  _p_a_n_e_l._s_c_r_i_p_t.  To replace with your
     own filename, click in the  box,  edit  the  name,  and
     press return.

     begin read, stop read:  Use to  read  the  script  file
     indicated.   The program will perform the actions saved
     in the script with nearly the same pacing as when  they
     were  written to the file, as if somebody was using the
     mouse (but you don't see the mouse cursor  move).   The
     _R_E_A_D_I_N_G  button  will  be  lit while the actions in the
     file are being displayed.  You may  still  adjust  set-
     tings  with the mouse while a script is being read, but
     some actions will produce unexpected  results.   (e.g.,
     if  you  pop up a panel then the script tries to pop up
     the same panel, it actually hides it instead)

     begin write,  begin  append,  stop  write/append:   Use
     _b_e_g_i_n _w_r_i_t_e to begin a new script file.  After clicking



                       April 9, 1993





                           - 17 -


     on _b_e_g_i_n _w_r_i_t_e, any mouse actions in the panels will be
     recorded  in the script file until _s_t_o_p _w_r_i_t_e/_a_p_p_e_n_d is
     selected.  _B_e_g_i_n _a_p_p_e_n_d will cause mouse actions in the
     panels  to  be appended to an existing specified script
     file until _s_t_o_p _w_r_i_t_e/_a_p_p_e_n_d is selected.  The  WRITING
     button  will be lit while the actions that occur in the
     panels are being recorded.  When writing  script  files
     for  demos,  avoid actions that require user input (_n_e_w
     _c_e_l_l _f_i_l_e, _n_e_w _v_e_c_t, _w_h_a_t'_s _h_e_r_e, _l_o_o_k _h_e_r_e, etc.),  as
     only  those  actions  that occur in the _P_A_N_E_L_S, not the
     graphics window or GRASS window, are  recorded  in  the
     script.  Also  it  is  a good idea to begin each script
     writing session by pressing _R_e_s_e_t, so that what you see
     as  you write the script will be the same as when it is
     read (no initial conditions are assumed or  reset  when
     reading a script).


_4.  _H_i_n_t_s


_4._1.  _L_i_g_h_t_i_n_g

Lighting greatly enhances the level of detail  that  can  be
seen  in  the  surface.  For good lighting effects, position
the light so that it  creates  a  tilted  half-moon  on  the
sphere.   Usually  placing  the light in the N-W corner when
viewing from the south works well because of the way  humans
tend  to  interpret  shading.  To reveal very subtle gradual
elevation changes, experiment with light placement and  sur-
face  reflectivity.   Keep  resolution higher (3 or 4) while
adjusting viewing position and lighting so that drawing time
is  fast.   Then  lower polygon resolution to 1 or 2 for the
final rendering of the surface.

When rendering frames for animation, it is usually better to
position  lights  so  that  they do not move with the viewer
position (toggle _F_o_l_l_o_w _V_i_e_w_p_o_i_n_t OFF).


_4._2.  _A_n_i_m_a_t_i_o_n

Several methods of creating rendered  frames  for  animation
are  available using _S_G_3_d; you may define a vector path, use
keyframes, or use a panel script.  What follows are a couple
of examples to help you get started with animation.


_4._2._1.  _K_e_y_f_r_a_m_e_s

Using keyframes is one of the easiest  and  most  satisfying
methods,  it  just  takes  some getting use to the _K_e_y _F_r_a_m_e
slider.  For practice, just try making a circular path while
always looking at the center of the data:



                       April 9, 1993





                           - 18 -


     1) use _l_o_o_k _h_e_r_e to mark a fixed center of view in  the
     middle of the surface.

     2) move  the  puck  in  the  _X_Y  _p_o_s_i_t_i_o_n  box  to  the
     southeast  corner,  adjust _H_e_i_g_h_t and _P_e_r_s_p_e_c_t_i_v_e until
     the data surface fills your graphics window.

     3) pop up the Keyframe panel.

     4) Click on _a_d_d _a _k_e_y_f_r_a_m_e.

     5) position the _K_e_y _F_r_a_m_e slider bar to the next  place
     to add a keyframe by clicking a half inch or so farther
     along the slider.

     6) move the _X_Y _p_o_s_i_t_i_o_n puck to the northeast corner.

     7) Click on _a_d_d _a _k_e_y_f_r_a_m_e and repeat step 5.

     8) move the _X_Y _p_o_s_i_t_i_o_n puck to the northwest corner.

     9) Click on _a_d_d _a _k_e_y_f_r_a_m_e.

You should now have enough  keyframes  marked  to  define  a
path, so try clicking on _s_h_o_w _p_a_t_h and then _r_u_n (NOT _r_u_n _a_n_d
_s_a_v_e _i_m_a_g_e_s).  If nothing happens, clear all  keyframes  and
go back to step 1.  Now let's complete the circular path:

     10) repeat step  5.

     11) move the _X_Y _p_o_s_i_t_i_o_n puck to the southwest corner.

     12) Click on _a_d_d _a _k_e_y_f_r_a_m_e.

     13) Now to close the loop, move the _K_e_y  _F_r_a_m_e_s  slider
     down  to frame 1, so that the first frame is displayed,
     release the mouse button, then click once on the slider
     in the empty part, past the last keyframe, and click on
     _a_d_d _a _k_e_y_f_r_a_m_e.  This essentially copies the first key-
     frame to the fifth & last keyframe.

Now click on _r_u_n.  When  the  animation  stops,  adjust  the
spline  tension  or  use  linear  interpolation,  change the
number of total frames, and run again.   If  you  wanted  to
render the animated frames to .rgb files, you would now tog-
gle _s_h_o_w _p_a_t_h OFF and click on _r_u_n _a_n_d _s_a_v_e _i_m_a_g_e_s, but  why
not  wait until you get a little more creative - image files
use a lot of disk space.

Changing keyframes:  With the above  keyframes  loaded,  try
changing a keyframe as follows:

     1) Position the _K_e_y _F_r_a_m_e_s slider  so  that  it  aligns
     with the arrow marking the second keyframe.



                       April 9, 1993





                           - 19 -


     2) Using the _H_e_i_g_h_t adjustment in the  Movement  panel,
     raise  your  viewing position.  Notice that if you have
     _s_h_o_w _p_a_t_h toggled ON, you  can  see  how  your  viewing
     position changes relative to the defined path by watch-
     ing the south or east path views.  The  small  red  dot
     represents your current position.

     3) Click on _a_d_d _a _k_e_y_f_r_a_m_e.  You will be asked  in  the
     GRASS  window  if you want to replace the old keyframe:
     type 'y' and 'return'.

     4) Run the animation again to  see  how  the  path  has
     changed.

     5) Delete the middle keyframe: grab  its  arrow  marker
     (using  your  left  mouse button), drag the marker com-
     pletely off the slider to the right,  and  release  the
     mouse button.  Run again to see how path has changed.

     6) Set total frames to about 50, then one  at  a  time,
     grab  the center keyframe markers and slide them toward
     the right so that they are spaced something like:

     1........2..3..4  Run again, notice how movement  speed
     was affected.

     7) Reverse the direction  of  travel  by  swapping  the
     positions of the two interior keyframe markers.

Parameters stored in the keyframe path include viewing posi-
tion,  looking direction, twist, and perspective.  The look-
ing direction will be overridden though, when  the  path  is
running,  if  _l_o_o_k  _h_e_r_e is active.  To see this effect with
the above path loaded, select  _l_o_o_k  _h_e_r_e  and  click  on  a
corner of the data, setting a new fixed center of view.  Now
run the path again.  Click on _l_o_o_k  _c_a_n_c_e_l  and  run  again.
Adjusting the _T_w_i_s_t parameter when creating a path will give
your animation more of a fly-by effect by simulating banking
turns.


_4._2._2.  _P_a_n_e_l _S_c_r_i_p_t_s

While vector paths and keyframe animation are good for show-
ing  movement  around your data surface, often animation can
also be used to show change over time, or perhaps change  in
surface  properties  due to a changing environmental parame-
ter.  In such cases, you will  be  creating  multiple  grass
data  files  to represent the change, using your own program
or other GRASS data analysis tools. _S_G_3_d can still  be  used
to produce a 3d surface animation.

Suppose you have generated 30 different  raster  files  that
show  diminishing  rainforest  cover over a period of years.



                       April 9, 1993





                           - 20 -


For this example, we will assume you will always be  draping
them  over  the  same  elevation file.  After setting a good
viewing position and adjusting lights,  you  _c_o_u_l_d  make  an
animation by this process: select _N_e_w _C_e_l_l (_c_o_l_o_r) _F_i_l_e from
the Options panel, load the file, _D_r_a_w the image, select _I_m_g
_D_u_m_p, name the image file, and repeat (30 times).

An easier way to accomplish the same thing would be to  pro-
duce  a panel script to do all the work for you.  But if you
review the discussion of the Scripting panel, you'll  notice
that  we  said  to avoid selecting options that require user
input (e.g. _N_e_w _C_e_l_l _F_i_l_e) since input in the  GRASS  window
is not recorded in panel scripts.  The way around this is to
know what questions the panel script will be asking and pro-
vide  all the answers in a text file that will be redirected
as input to _S_G_3_d at startup.  This is kind of messy, but  it
works  great  if  you're careful.  So for the above example,
the text file would look like this:

     rast01.file<return>

     <return>

     img01.rgb<return>

     rast02.file<return>

     <return>

     img02.rgb<return> ...

     rast30.file<return>

     <return>

     img30.rgb<return>

For this example, you would create the panel script as  fol-
lows:  Start _S_G_3_d, using the -w option to allow script writ-
ing.  Pop open the scripting panel and  the  Options  panel.
Enter  a  name  for  your  script  in the type-in box on the
scripting panel.  Now click on _b_e_g_i_n _w_r_i_t_e, _N_e_w _C_e_l_l (_c_o_l_o_r)
_F_i_l_e,  [<_e_n_t_e_r>  _i_n  _G_R_A_S_S  _w_i_n_d_o_w], [<_e_n_t_e_r> _a_g_a_i_n _i_n _G_R_A_S_S
_w_i_n_d_o_w], _D_r_a_w (wait for surface to draw), _I_m_g _D_u_m_p, [<_e_n_t_e_r>
_i_n  _G_R_A_S_S  _w_i_n_d_o_w],  _b_e_g_i_n _r_e_a_d, _s_t_o_p _w_r_i_t_e.  This creates a
panel script that is an infinite loop, but the program  will
terminate  when  EOF is received in standard input from your
text file.

Finally, you would create the animation itself  by  starting
the  program with: _S_G_3_d _e_l_e_v._f_i_l_e _c_o=_r_a_s_t_0_1._f_i_l_e < _y_o_u_r._t_x_t.
Adjust lighting and positioning (if you have a  3dview  file
you want to use instead, load it at startup with _3_d_v_i_e_w=_f_i_l_e
because if you try to load it once  a  text  file  has  been



                       April 9, 1993





                           - 21 -


redirected  to  the program, _S_G_3_d will use the first line in
the text file as input in the GRASS  window).   Then  pop-up
the  scripting  and  Options  panels, enter the name of your
panel script, click on _b_e_g_i_n _r_e_a_d and take a lunch break.

You may want to save panel scripts created as  above,  since
they could be used with different text input files to create
completely different animations.  On the  other  hand,  once
you've  got  the hang of it the panel scripts are quite easy
to make.  Using this method, it is also possible to  "morph"
a  surface  by  loading  changing elevation files instead of
color files. Once you get used to this method, you  can  try
adding  multiple  vector  or  site  files  to  your surface,
animating multiple surfaces, or combining  movement  with  a
changing surface.


_4._2._3.  _V_e_c_t_o_r _P_a_t_h_s

The discussion of vector paths  in  section  3.9  is  fairly
detailed, but here are a few more suggestions.

Use the GRASS program _v._d_i_g_i_t to digitize a path  you  would
like  to  follow, using a minimum number of points.  Or, use
_v._d_i_g_i_t to create a subset of  a  roads  or  streams  vector
file, ending up with a single road or stream in a new vector
file to use for a path.

Using _L_o_o_k _F_o_r_w_a_r_d with the number of frames to  look  ahead
set  to  5 or 6 for a 50 frame animation gives good results;
looking ahead only a frame or two will usually cause  a  lot
of jerkiness.

Adjust the _T_i_l_t dial while previewing the running animation.

When adjusting spline tension with _s_h_o_w _p_a_t_h toggled ON,  It
may be necessary to temporarily adjust your viewing position
to a place well above your surface, looking down,  in  order
to get a good view of your path.


_4._2._4.  _I_m_a_g_e _F_i_l_e _M_a_n_a_g_e_m_e_n_t

Because .rgb image files can end up taking  a  lot  of  disk
space, users should be mindful of disk storage capacity when
attempting to create an animation.  Keeping animation  files
and  image  dumps  in  directories  dedicated for such files
helps in management.   A  single  rgb  image  usually  takes
between 200K to 3M bytes of storage, depending upon size and
complexity.  To save disk  space,  use  the  SG3D_WIDTH  and
SG3D_HEIGHT environment variables to limit the graphics win-
dow to known dimensions.  If you use the SGI  _m_o_v_i_e  program
to  replay animations, each frame of the animation must have
been saved to files of identical dimensions;  so  especially



                       April 9, 1993





                           - 22 -


if  you  are  creating  an animation piecewise, at different
sessions, it becomes important to use the environment  vari-
ables to maintain a consistent size for the graphics window.
With the _m_o_v_i_e program and with other screen dump  animating
programs,  there  is  a zoom option to enlarge the animation
images at time of playback.  So if you want the animation to
fill  your screen, you could set the width and height of the
graphics window to half or a third their playback sizes when
writing the image files, then use the zoom option (this will
cause a loss of  resolution  though,  since  the  zoom  just
replicates  pixels).   If  you are making an animation to be
recorded onto video tape, it may be  necessary  to  set  the
width and height to specific dimensions.

New SGI programs released with IRIX  4.0.5,  _m_o_v_i_e_m_a_k_e_r  and
_m_o_v_i_e_p_l_a_y_e_r, are also very useful for animations. _M_o_v_i_e_m_a_k_e_r
allows you to create movie files  from  any  number  of  rgb
files at various frame rates.  With _m_o_v_i_e_p_l_a_y_e_r, much longer
animations may be replayed than with _m_o_v_i_e since the  frames
are  read  directly from disk at run time rather than having
to be loaded into memory.


_5.  _C_r_e_d_i_t_s

_S_G_3_d written by Bill Brown and David Gerdes, U.S. Army Corps
of Engineers Research Laboratories, Champaign, Illinois.

This report written by Bill Brown, Fall 1992.  Your comments
and suggestions are appreciated.

*************************************

Bill Brown

USACERL - ECA

PO Box 9005

Champaign, IL  61826-9005

e-mail: brown@zorro.cecer.army.mil

phone:  (217) 352-6511 ext 676

*************************************











                       April 9, 1993


