.\" @(#)legend.1 - 1.1
.nr LL 5.5i
.TH LEGEND 1 6/21/89 "USGS/OEMG Systems"
.ad b
.hy 1
.SH NAME
legend \- create overlay of legend information
.SH SYNOPSIS
.LP
.B legend
[ \-oaci [args]]
[ \-m ] def_file
[ files ]
.SH DESCRIPTION
.I Legend
is a graphic function in the
.SM MAPGEN/PLOTGEN
graphic series which provides for creating overlays
of legend information such as titles, scale bars, etc..
.PP
Most of the following options can appear in any order:
.TP
.BI "[ \-m ]" " def_file"
This option specifies the required map or plot definition file.
If the
.B \-m
is omitted,
.I def_file
must be the first file listed.
.TP
.BI \-o " file"
This option specifies the name of the overlay metagraphic file to
be created.
.TP
.BI \-a " file"
Similar to the
.B \-o
option except that if the named file already exists graphic
data will be appended.
.TP
.BI \-i
If this option is specified a preview of the plot is
output to the controlling terminal.
If the
.B \-o
or
.B \-a
option is omitted, then
.B \-i
is implied.
.TP
.BI \-c " string"
This options provides for run-line inclusion of graphic options
listed below.
If there is more than one option or imbedded blanks,
the field must be enclosed in quotes or apostrophies.
The contents of this option is processed before the control files.
.PP
One or more
.I files
containing control and graphic operations associated with the
legend overlay.

The following options provide for graphic control and may only appear
in the control file[s] or the \-c runline argument.
.TP
.BI \-f " font"
.I Font
is the name of the graphics system character set font to be
employed in subsequent character plotting.
A \- will select the system default font.
This option and
.B \-s
must be selected prior to any character
operations.
.TP
.BI \-a " font"
.I Font
is similar to the
.B \-f
option except that it selects an alternate character font.
This font will be selected when ^B control character
occurs in a text string.
A ^A control character will reselect the
.B \-f
font.
Size and other attibutes of the alternate character are
set as per the normal font.
.TP
.BI \-s " size"
.I Size
is the nominal size of the character set selected in centimeters.
.TP
.BI \-S[f|s|r|c] " arg"
This option provides for control of symbol plotting in a manner
similar to character control options.
.BI \-Sf " font"
selects the symbol font,
.BI \-Ss " size"
sets symbol size, and
.BI \-Sr " ang"
sets symbol rotation.
.BI \-Sc " sym"
will post the symbol selected by
.I sym
at the current x-y coordinate.
If the first character of sym is a decimal digit then
.I sym
is assumed to be the numeric
\(emdecimal (1\-9), octal (0n), or hexadecimal (0xn)\(em
value of the selected symbol;
otherwise, it is assumed to be the ascii equivalent of the
selected symbol.
.TP
.BI \-l " leading"
This option selects the desired 
.I leading
or spacing desired between multiple print lines 
generated by the
.B \-t
option.
The units of
.I leading
are in centimeters.
.TP
.BI \-ox " val"
.I Val
sets offset in centimeters of character text from the selected
.B x/y
coordinates.
Offset is made before rotation.
.TP
.BI \-oy " val"
This option is similar to
.B \-ox
except that
.I val
refers to the y-axis.
.TP
.BI \-x/y " coord"
The base position of subsequent graphic options is determined
by the coordinates specified by
.B \-x
and
.B \-y
argument coordinates.
The numeric value of the
.I coord
argument is always in centimeters.
If the value is immediately preceded by a > symbol, then the coordinate is
relative to either the right or top edge of the current region.
If the value is immediately preceded by a | symbol, it is relative to the
median of the respective axis; otherwise, the
value is relative to the lower left hand corner of the currently
selected region.
See also
.B \-w
command for selection region of reference.
.TP
.BI \-w " region"
This option specifies which of the two basic regions of the
plot sheet are begin referred to with the
.B \-x/y
coordinate values.
The value of
.I region
should be either p or d
corresponding to the respective basic plot sheet or data region.
The effect of this command will remain in effect until another
.B \-w
command.
The default region is p.
.TP
.BI \-b " size,unit,rep[,left[,name]]"
This option generates a scale bar.
.I Size
is the scale bar ticked elements in integral units selected by
.I unit.
If
.I unit
is a numeric value, it represents the number of meters in one
basic unit.
Otherwise it must be one of the following unit types:
.RS 2i
 \f(CWft\fR	\(em feet
 \f(CWkf\fR	\(em kilofeet
 \f(CWm\fR	\(em meters
 \f(CWkm\fR	\(em kilometers
 \f(CWyd\fR	\(em yards
 \f(CWky\fR	\(em kiloyards
 \f(CWmi\fR	\(em statute miles
 \f(CWkn\fR	\(em nautical miles
.RE
.IP
.I Rep
is the number of times the unit part of the scale bar is repeated.
If
.I left
is given then a unit left of the '0' position of the scale bar is
generated with
.I left
subdivisions.
If a numeric
.I unit
is given then
.I name
will be used as the source of the titling of the scale bar.
In all cases where ascii
.I unit
is given the scale bar title
.I name
field is generated automatically.
Note that currently selected font and character size determine
drafting characteristics of the scale bar annotation and
the current x/y coordinates determine the
location of the bottom of the '0' value of the scale bar.
The y-axis size required by the scale bar is about 3 times the 
character size.
Horizontal size depends upon map scale and number of bar elements
selected, selection of
.I left
as well as
.I units.
.TP
.BI \-d
This option will cause the scale fraction value to be printed
at the current coordinates.
Character font and size must have been previously specified.
.TP
.BI \-j " opt"
.I Opt
must be either l, c or r which respectively select
left, centered, or right justification of graphic.
.TP
.BI \-t
All lines following this option are considered text to be
plotted at the current coordinate position.
A '.' must appear in column 1 to terminate the text.
Note that an appropriate value of leading must have been previously
made for line spacing.
The escape sequence \eooo may be employed to enter normally non-printing
characters into the text stream by entering their octal value ooo
(\exhh may be alternately employed where hh is the hexadecimal value
of the character).
This option should not be employed on the same control line
as option
.B \-L
or
.B \-B.
.TP
.BI \-[T|E] " text"
This option allows the use of the device independent form of
.I troff
to be used to format textual material for inclusion as legend information.
The file
.B text
contains
.I troff
and/or
.I eqn
(when
.B E
option used)
source data (control and text) to be plotted.
Current
.B x
and
.B y
values will determine the location of the upper left-hand corner
of the formatted text.
It is recommended that the first control lines of the
source text be:
.br
	\\!x U <real number>i (optional page width)
.br
	.po 0  (don't bother with left margin)
.br
	.ll <real number>i (line length)
.br
The first line is required if multiple pages are expected.
The <real number> is the offset to be applied when plotting
multiple pages as multiple columns.
The i suffix in both the page width and line length options
may be either c, p, or i which specifies the respective
centimeter, point or inch units of the numeric prefix.
.TP
.BI \-r " ang"
.I Ang
is the number of degrees that character plotting operations are
to be rotated form the positive x direction.
.TP
.BI \-p " pen"
.I Pen
is a mechanical pen number to be employed.
.TP
.BI \-[L|B] " pen[,mask,size[,dist,ssize,str]]"
This option provides for controlling the method and character of lines.
\-L designates normal point to point vector drafting and \-B selects
four point Bezier method of creating smooth lines.
Argument
.I pen
designates the mechanical pen to be employed in drafting and must
be specified with each usage.
The remaining arguments may be optionally specified but when omitted
the position must be indicated with appropriate comma (,) delimiters
(ie. \(CW# -B 0,,,1,.2,\e010 #\fR\(em \fImask\fR and \fIsize\fR unaltered).
.IP
.I Mask
and
.I size
control dash line drafting where
.I mask
is specification of the 16 bit dash pattern to be employed and
.I size
is the size of the bit element of the mask pattern in centimeters.
Note that the total length of the dash pattern is 16\(mu\fIsize\fR
centimeters.
If
.I mask
is \-1 then a solid line is drafted and
.I size
is ignored and
when
.I mask
is 0 line drafting is suspended
(0 is usually only employed with symbol line drafting).
.I Mask
is usually specified as a hexadecimal value
(ie. 0xCCCC for a small dash bit pattern of 1010101010101010)
.IP
Lines with symbol patterns may be created by using
the
.I dist, ssize
and
.I str
options where
.I dist
is the inter-symbol distance in centimeters,
.I ssize
is the size of the symbol in centimeters.
.IP
.I Str
is any string of one to 128 symbols selected from the selected character
font to be employed in a repeated manner when drafting symbol lines.
A special symbol (\e177) may be employed to denote an empty
point in the symbol sequence.
Any symbol (including the empty point symbol)
with the most significant bit (sign) set will cause 180\(de
rotation of the current and following
.I str
(if any) symbols.
At the start of each cycle through
.I str
the character rotation is set to 0\(de so that if a line is progressing
from left to right the symbol would appear right side up.
If a single symbol is to appear in a reverse manner then
\e200 should be added (i.e. a reverse rotation letter A would be \e301).
To create a sequence of symbols with
alternating rotation then two or more
symbols must be used with the sign set on some symbol other than
the first.
For example, \f(CW\-a A\e301\fR will cause the letter A to be
plotted with alternating rotation.
.IP
The cyclic operation though
.I str
can be inhibited by terminating
.I str
with the \e377 special character.
This permits this option to be employed for drafting curved annotation
based on the following line data.
With this feature the
drafting of the line is normally turned off
(ie. \f(CW# -L ,0,,.01,.3,Example\e Line\e377\fR).
.IP
Coordinates of the line to be drafted follow the current command
line with one x-y pair per line.
The string of coordinates must be terminated with a '.'
in column 1 (similar to
.B \-t
option).
Use of + and \- sign prefixes follow the same meaning as
defined under the
.B \-x/y
option.
This option should not be employed on the same control line
as option
.B \-t.
.PP
The older
.SM PLOTGEN
verson of
.B legend, plegend,
is replaced by this program.
.SH SEE ALSO
.SM "" MAPGEN/PLOTGEN system documentation
.br
troff and plroff
.SH BUGS
The \-T option is only available on
.SM "AT&T UNIX"
V.2 or later systems with device independent
.I troff.
.SH AUTHOR/MAINTENANCE
Gerald I. Evenden, USGS, Woods Hole, MA.
