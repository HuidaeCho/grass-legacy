From pierre@audiovu.com Wed May  3 06:20:31 2000
Return-Path: <pierre@audiovu.com>
Received: from mgate.uni-hannover.de by hgeo02.geog.uni-hannover.de (SMI-8.6/SMI-SVR4)
	id GAA09984; Wed, 3 May 2000 06:20:30 +0100
Received: from postfix3.free.fr by mgate.uni-hannover.de (PP) with SMTP;
          Wed, 3 May 2000 06:26:13 +0200
Received: from saturne.audiovu.com (paris11-nas4-47-64.dial.proxad.net [212.27.47.64]) 
          by postfix3.free.fr (Postfix) with ESMTP id 4633786B63 
          for <neteler@geog.uni-hannover.de>;
          Wed,  3 May 2000 06:24:56 +0200 (CEST)
Received: from localhost (localhost [[UNIX: localhost]]) 
          by saturne.audiovu.com (8.9.3/8.8.7) id GAA02672 
          for neteler@geog.uni-hannover.de; Wed, 3 May 2000 06:25:27 +0200
From: Pierre de Mouveaux <pmx@audiovu.com>
Reply-To: pmx@audiovu.com
To: Markus Neteler <neteler@geog.uni-hannover.de>
Subject: diffs
Date: Wed, 3 May 2000 05:46:11 +0200
X-Mailer: KMail [version 1.0.28]
Content-Type: Multipart/Mixed;
              boundary="Boundary-=_nWlrBbmQBhCDarzOwKkYHIDdqSCD"
MIME-Version: 1.0
Message-Id: <00050306251700.02617@saturne.audiovu.com>
Sender: pierre@audiovu.com
Status: RO
X-Status: A
Content-Length: 341946
Lines: 4508


--Boundary-=_nWlrBbmQBhCDarzOwKkYHIDdqSCD
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable

Hello Markus,

you will get it all!
the device option, the r:v:b color naming scheme, and the layered XDriver=
=2E

Note that I patched the orginal XDriver so it works seamlessly with my mo=
difs.

5 layers (hardcoded). Layers are designed by number. Stacking is fixed, b=
y
number. (o=3Dbackgrount, 4=3Dtop layer). (internally, +2 layer, plus a tr=
ansitional
off-screen for screen updates All this was partly to allow "undoing").

d.rast, d.vect and d.erase are patched. Play also with d.zoom or d.rhumbl=
ine (or
the non lat-lon equivalent).

d.erase erases everything, erases internal "pad" infos, and sets bg color=
=2E

You have also a new d.layers, the tool to control what appens on screen:

d.layers [flags] layer=3D0->max_layers (now, 0->4)
When relevant, if no layer is given, the command will assume the current =
layer.

flags:
---
-g =09=09displays information about current layer id
                        (will be improved with status: visible or not)
-t layer=3Dm=09target layer: layer m will be the current layer
-x layer=3Dm=09erase layer m (if no layer, will NOT erase the current lay=
er)
-h layer=3Dm=09hide layer m (visibility status)
-s layer=3Dm=09show layer m
-o layer=3Dm=09solo layer m (hide all others layers)
-v=09=09show all visbles layer (i.e. refresh screen,=20
                        honours the visibility status)
-a=09=09show all layers, whatever the individual status
-u=09=09"undo last move", disabled


d.layers -o l=3D1 =09shows only layer 1. (solo)

d.layers -h=09hides the current layer
d.layer -a =09displays all the layers.

Here is a diff, after a fresh update from CVS. Apply the patch from withi=
n
/grass/src. (patch -p0 -u < 3-may.diff)
PS I hope this will work. I got numerous lines of patch regarding r.binfe=
r.,
although I did an update just before, and I did the patch with the -rHEAD
option. CVS is still a mistery for me...=20

If d.layers doesn't apears into grass/src/display, I send a d.layers.tar.=
gz
If grass/src/display/drivers/XDRIVER2 doesn't apear, I also send a tar.gz=
 file.

You will have to recompile all the display and raster libs, plus everythi=
ng
into src/display. I suggest you erase all libes from /src/libes/ARCH-lib,=
 then
recompile.
Between the regular X11 driver and the new one, the last compiled will
win (i.e. will remplace the other one).

Also here are my work notes for the "display option" update. (text file).

All this is preliminary ;))
Bye,
Pierre
