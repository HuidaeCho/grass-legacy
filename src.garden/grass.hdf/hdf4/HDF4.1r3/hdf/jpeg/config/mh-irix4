# This makefile fragment will override the default options found at the top
# of the 'Makefile' in the jpeg source directory. See 'Makefile.in'
# for discussion of the various options.
#

ANSI2KNRFLAGS= 
LDFLAGS= 
LDLIBS= 
SYSDEPMEM= jmemnobs.o
RM = /bin/rm 
RMFLAGS = -f
MV= mv
AR = ar
ARFLAGS = rc
AR2 = true

# The following segment should not really be the fragments but I 
# couldn't find a way to avoid this.-GV
#
# Uncomment the following line if you don't have an ANSI compilier
# and comment out the one below it
#all: @ANSI2KNR@ libjpeg.a cjpeg djpeg rdjpgcom wrjpgcom
all: libjpeg.a cjpeg djpeg rdjpgcom wrjpgcom

# Uncomment the following rule if you don't have an ANSI compilier
# This rule causes ansi2knr to be invoked.
# .c.o:
# 	./ansi2knr $(srcdir)/$*.c T$*.c
# 	$(CC) $(CFLAGS) -c T$*.c
# 	$(RM) $(RMFLAGS) T$*.c $*.o
# 	$(MV) T$*.o $*.o

ansi2knr: ansi2knr.c
	$(CC) $(CFLAGS) $(ANSI2KNRFLAGS) -o ansi2knr ansi2knr.c

# Uncomment the following line if you don't have an ANSI compilier
# and comment out the one below it
#libjpeg.a: @ANSI2KNR@ $(LIBOBJECTS)
libjpeg.a: $(LIBOBJECTS)
	$(RM) $(RMFLAGS) libjpeg.a
	$(AR) $(ARFLAGS) libjpeg.a  $(LIBOBJECTS)
	$(AR2) libjpeg.a
