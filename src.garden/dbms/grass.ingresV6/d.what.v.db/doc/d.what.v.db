


d.what.v.db          GRASS Reference Manual           d.what.v.db



NAME
     d.what.v.db - Report database attributes associated with
     vector features.
     (GRASS-RDBMS Attribute Interface Program)

SYNOPSIS
     d.what.v.db
     d.what.v.db help
     d.what.v.db tab=name col=name map=name
     [join=tab,tabkey,pkey]

ALTERNATE
     d.what.v.db -s help
     d.what.v.db -s sql=filename map=name

DESCRIPTION
     Reports database attributes from the currently selected
     database which are associated with specific vector features
     identified using the mouse. The currently selected database
     is identified by the GRASS environment variable $DATABASE
     which is set using the g.select.db GRASS-RDBMS interface
     tool. If this environment variable is not set the program
     terminates with a message to the user.  If no join
     parameters are provided by the user on the command line the
     attributes in the table directly linked to the GRASS raster
     structure via the category value are returned. However, if a
     join is specified then attributes from a related table are
     displayed. If the alternate form of this command is selected
     with the -s flag the user has greater control over the
     number of relational joins and the manner in which the
     attribute information is displayed. Using the -s option the
     attributes from more than one table can be returned and
     displayed.


COMMAND LINE OPTIONS
     Parameters:

     tab=database_table_name
          Table containing column linked to vector attribute
          values.

     col=database_column_name
          Column associated with vector attribute values.

     map=map
          Name of an existing vector map with attribute values
          linked to the currently selected database.

     join=tab,tabkey,pkey
          Tab is the table used to develop the current SQL query.
          Tabkey is the database column used to relate



GRASS                    U.S. Army CERL                         1






d.what.v.db          GRASS Reference Manual           d.what.v.db



          information in this table with data in the table linked
          to the GRASS category file. Pkey is the associated
          column in the table linked to the GRASS category file
          which is related to tabkey in the current table.

          For instance, assume that feature is a table containing
          column values associated with category values in a
          GRASS vector file (record_num).  In addition, assume
          that cfcc_lookup is a table containing attribute data
          on the transportation network in the same area. In this
          example cfcc_lookup.cfcc is the column linking the
          table cfcc_lookup to the table feature via
          feature.cfcc. To specify a query based on attribute
          values in the table cfcc_lookup the join statement
          would be:

               join=cfcc_lookup,cfcc_lookup.cfcc,feature.cfcc

          Specifying these conditions would insure that all rows
          from table cfcc_lookup which satisfy the query criteria
          would be matched with the corresponding rows in table
          feature, which are then related to the spatial features
          in the GRASS data layer via the database column
          feature.record_num which is related to the  GRASS
          category values.


          This syntax is adequate to accomplish 2 table joins.
          However, if the query demands joins between more than 2
          tables it is advisable to use the -s option [see
          Alternate Command Line Usage] to read a user prepared
          query, complete with join requirements, from a file.

ALTERNATE COMMAND LINE USAGE
     The alternate command line usage is provided to simplify the
     process of retrieving information from more than one table
     in the query criteria. The alternate command line structure
     is selected using the the [-s] flag on the command line.
     When using this flag the user must include the name of a
     text file on the command line as well. This file must
     include a complete, well formed SQL SELECT statement
     specifying the query criteria and all relevant JOINS needed
     to retrieve values which correspond to category values in a
     GRASS data layer.

     The user must also specify the name of the GRASS data layer
     containing these category values on the command line. The
     following example illustrates the syntax which must be used
     in constructing a SELECT statement for use with the -s flag.






GRASS                    U.S. Army CERL                         2






d.what.v.db          GRASS Reference Manual           d.what.v.db



EXAMPLE (single table)
     d.what.v.db  -s sql=census.sql map=census

     census.sql:
          SELECT * FROM cfcc_atts
          WHERE cfcc_atts.tlid=?

     Result: Reports all attributes from table cfcc_atts
     associated with the vector at current mouse location.



EXAMPLE (two table join )
     d.what.v.db  -s sql=census.sql map=census


     census.sql:
          SELECT * FROM cfcc_atts, cfcc
          WHERE cfcc_atts.tlid = ?
                AND cfcc_atts.cfcode=cfcc.cfcode

     Result: Reports all attributes from tables cfcc_atts and
     cfcc associated with the vector at current mouse location.


     Flags:

     -s   SQL select statements are input from a prepared file.

     Parameters:

     sql=filename
          SQL statements specifying well formed selection
          criteria.

     input=map
          Name of an existing vector map.

BUGS
     None known.


SEE ALSO
     g.column.db, g.select.db, g.stats.db, g.table.db, d.rast.db,
     d.site.db, d.what.r.db, d.what.s.db, d.what.v.db,
     r.reclass.db, r.rescale.db, v.reclass.db

AUTHOR
     James A. Farley, Wang Song and W. Fredrick Limp University
     of Arkansas, CAST





GRASS                    U.S. Army CERL                         3



